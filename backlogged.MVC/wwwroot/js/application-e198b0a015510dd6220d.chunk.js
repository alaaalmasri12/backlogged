(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(t,e,a){"use strict";a.r(e),function(t,e){a(7),a(105);e.$=t;a(106);a(107).start(),a(28).start(),a(108).start(),a(7),a(109),a(90),a(60),a(110),a(10),a(0),a(70),a(71),a(59),a(111),a(112),a(3),a(1),a(61),a(5),a(12),a(72),a(114).start(),a(73),a(115),a(118),a(189),a(190),a(191),a(192),a(193),a(194),a(195),a(196),a(197),a(198),a(199),a(200),a(201),a(202)}.call(this,a(7),a(42))},105:function(t,e,a){},106:function(t,e,a){var n={"./IGDB_logo":75,"./IGDB_logo.svg":75,"./backloggd-logo-full":76,"./backloggd-logo-full.png":76,"./goty19":77,"./goty19.png":77,"./goty20":78,"./goty20.png":78,"./goty21":79,"./goty21.png":79,"./goty21_winners":80,"./goty21_winners.png":80,"./humble":81,"./humble-jackbox":82,"./humble-jackbox.png":82,"./humble.png":81,"./humble_square":83,"./humble_square.png":83,"./humblemonthly":84,"./humblemonthly.png":84,"./igdb_icon_white":85,"./igdb_icon_white.png":85,"./meta_banner":86,"./meta_banner.jpg":86,"./no_avatar":87,"./no_avatar.jpg":87,"./no_image":88,"./no_image.jpg":88,"./steam_circle":89,"./steam_circle.png":89};function o(t){var e=i(t);return a(e)}function i(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}o.keys=function(){return Object.keys(n)},o.resolve=i,t.exports=o,o.id=106},115:function(t,e,a){"use strict";a.r(e),function(t){var e=a(1),n=a.n(e),o=a(5),i=a.n(o),s=a(12),l=a.n(s),r=a(72),c=a(10),d=a(59),u=a(4),p=a(3),m=a(10).default;l.a.options={closeButton:!1,debug:!0,newestOnTop:!1,progressBar:!1,positionClass:"toast-bottom-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"3000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var g=a(116);t(document).on("ready turbolinks:load show.bs.modal",(function(){n()(),t.ajaxSetup({beforeSend:t.rails.CSRFProtection})})),t(document).on("turbolinks:before-cache",(function(){t(".selectpicker").selectpicker("destroy").addClass("selectpicker"),Object(u.f)(),n.a.teardown(),Object(c.hideAll)()})),window.onmount=n.a,window.toastr=l.a;var h=Object(r.debounce)(350,(function(e,a,n){t.ajax({url:"/goty_search/"+n+"/",data:{query:e,category:a}})}));function f(e){var a=[];null==e?t(".quick-access-bar, .game-cover.force-load-log").each((function(e){t(this).attr("game_id")&&a.push(t(this).attr("game_id"))})):a=e,0!=(a=t.unique(a)).length&&t.ajax({type:"POST",url:"/api/user/games/logs",data:{ids:a},success:function(e){t.each(e,(function(e,a){a.is_play&&(t(".quick-access-bar #play-"+e).addClass("btn-play-fill").addClass("play-type-color").addClass(a.status),t(".quick-access-bar #play-"+e+" button").attr("play_type",a.status),t(".quick-access-bar #play-"+e+" button").css("color","var(--back-type-"+a.status+")"),t(".game-cover[game_id='"+e+"']").addClass("fade-played"),t(".list-entry-note-btn[game_id='"+e+"']").addClass("note-with-status"),t(".star-rating#rating"+e+" input#rating_"+a.rating+"_"+e).prop("checked",!0)),a.is_backlog&&t(".quick-access-bar #backlog-"+e).addClass("btn-play-fill"),a.is_playing&&(t("#more-button-container-"+e+" .playing-btn-container").addClass("btn-play-fill"),t(".quick-access-bar #playing-"+e).addClass("btn-play-fill")),a.is_wishlist&&(t("#more-button-container-"+e+" .wishlist-btn-container").addClass("btn-play-fill"),t(".quick-access-bar #wishlist-"+e).addClass("btn-play-fill"));var n=a.rating;n>0&&(t(".star-rating-field #rating_"+n+"_"+e).prop("checked",!0),t(".star-rating-field + #delete_rating_"+e).removeClass("d-none"),t(".star-rating-field + #delete_rating_"+e).attr("game_log_id",a.id)),t(".journal-button-container#journal-"+e+" .journal-btn").html("Edit your log"),t("#more-button-container-"+e+" .quick-logs").removeClass("d-none"),null!=a.status&&t(".game-cover[game_id='"+e+"'] .status-overlay").html("<div class='status-bubble play-type-bkg "+a.status+"'></div>"+a.status_title)})),t(".quick-access-bar .more-button").each((function(e){var a=t("#more-button-container-"+t(this).attr("game_id")),o=m(t(this)[0]);o.setProps({delay:[50,null],offset:[8,0],hideOnClick:!0,interactive:!0,interactiveBorder:15,animation:"shift-away-subtle",trigger:"mouseenter click",allowHTML:!0,placement:"right-end",theme:"backloggd-quick-access",onShown:function(t){n()()}}),o.setContent(t(a).html())}))}})}function v(){setTimeout((function(){t(".holiday-letter").toggleClass("holiday-1"),t(".holiday-letter").toggleClass("holiday-2"),v()}),850)}n()('input[type="radio"][name="feedback"]',(function(){t(this).on("change",(function(){t("#feedback-submit").prop("disabled",0==t('input[type="radio"][name="feedback"]:checked').length)}))})),n()(".feedback-button",(function(){t(this).on("click",(function(){var e=t(this).attr("feedback_type"),a=t(this).attr("question"),n=t(this).attr("is_beta")||"true";t("#feedback-question-label").html(a),t("#feedback-modal").attr("type",e),t("#feedback-modal").attr("is_beta",n),"true"===n?t("#beta-opt-out-text").removeClass("d-none"):t("#beta-opt-out-text").addClass("d-none"),MicroModal.show("feedback-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0})}))})),n()("#feedback-submit",(function(){t(this).on("click",(function(){var e=t("#feedback-modal").attr("type"),a=t("#feedback-modal").attr("is_beta"),n=t('input[type="radio"][name="feedback"]:checked').val(),o=t("#feedback-modal #feedback_body").val();MicroModal.close("feedback-modal"),t.ajax({type:"POST",url:"/feedback/submit/",data:{type:e,feedback_detail:o,feedback_general:n,is_beta:a},success:function(e){l.a.success("Feedback submitted, thank you!"),t("#feedback-submit").prop("disabled",!0),t("#feedback-modal #feedback_body").val(""),t('input[type="radio"][name="feedback"]').prop("checked",!1)}})}))})),n()(".about-faq-btn",(function(){t(this).on("click",(function(){var e=t(this).attr("cat_id");t(".about-faq-btn").removeClass("filled"),t(this).addClass("filled"),"all"==e?t(".faq-cat-section").removeClass("d-none"):(t(".faq-cat-section").addClass("d-none"),t('.faq-cat-section[cat_id="'+e+'"]').removeClass("d-none"))}))})),n()("#daily-tip",(function(){void 0==i.a.get("daily_tip")&&t.ajax({url:"/api/daily-tip/",success:function(e){i.a.set("daily_tip",e.tip,{sameSite:"strict",expires:1}),t("#daily-tip").html(e.tip)}})})),n()(".archive-use-log",(function(){t(this).on("click",(function(){var e=t(this);Object(u.a)("Choosing this game will permanently delete the other game's logs, play sessions, reviews, and all game status data associated with it.<br><br>Are you sure you want to continue?",(function(){}),(function(){t.ajax({type:"PATCH",url:"/api/archive/use/",data:{use_merge:e.attr("use_merge"),log_id:e.attr("game_log_id")},success:function(t){window.location.replace("/settings/archive/")},error:function(t,e,a){l.a.success("Error making log change: "+a)}})}),"Cancel","Continue")}))})),window.loadQuickAccessBar=f,n()("#declined-confirm-btn",(function(){var e=t(this).attr("user_id");t(this).on("click",(function(){t("#declined-alert").alert("close"),t.ajax({type:"PATCH",url:"/users/"+e,data:{perk_status:null}})}))})),n()("body",(function(){var e,a;f(),e=[],t(".like-heart").each((function(a){"review"==t(this).attr("model")&&e.push(t(this).attr("model_id"))})),0!=(e=t.unique(e)).length&&t.ajax({type:"POST",url:"/api/user/reviews/likes",data:{ids:e},success:function(e){t.each(e,(function(e,a){t("#like_"+a+" .like-heart").addClass("liked")}))}}),(a=window.location.hash)&&t(".comment"+a).addClass("viewing")})),n()(".btn-backer-beta",(function(){t(this).on("click",(function(){void 0==i.a.get("beta-disable")?i.a.set("beta-disable",!0,{sameSite:"strict",expires:365}):i.a.remove("beta-disable"),window.location.reload(!1)}))})),n()(".selectpicker",(function(){t(this).selectpicker({style:""}),t(this).hasClass("platforms-use-slug")&&t(this).children().each((function(e){t(this).attr("value",t(this).attr("slug"))}));var e=t(this).attr("selected-value");e&&t(this).selectpicker("val",e.split(","))})),n()(".pagy-nav",(function(){t(".pagy-nav .page.prev, .pagy-nav .page.next, .pagy-nav .page.gap").addClass("d-none d-sm-block"),t(".pagy-nav .page:not(.d-none):eq(0)").addClass("ml-auto"),t(".pagy-nav .page:not(.d-none):eq(-1)").addClass("mr-auto"),t(".pagy-nav .page:not(.d-none)").length>8&&t(".pagy-nav .page:not(.d-none):eq(-2), .pagy-nav .page:not(.d-none):eq(1)").addClass("d-none d-sm-block")})),n()("#refresh-game-data",(function(){t(this).on("click",(function(){t(this).prop("disabled",!0),t(this).html('<div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>'),t.ajax({type:"PATCH",url:"/refresh-game-data/",data:{game_id:t("#game-page-id").attr("game_id")},success:function(t){window.location.replace("/games/"+t.game_slug+"/")},error:function(t,e,a){l.a.success("Error refreshing data: "+a)}})}))})),n()("#user_avatar_btn",(function(){t(this).on("change",(function(){var e=t(this).val().replace("C:\\fakepath\\","");t("#file-selected").html(e)}))})),n()(".dropdown-toggle",(function(){t(this).on("click",(function(){t(this).toggleClass("active")}))})),n()(".holiday-title",(function(){v()})),n()("#goty-toggle-edit",(function(){t(this).on("click",(function(){t(".goty-edit-entry").toggleClass("d-none"),t(".goty-edit-entry").hasClass("d-none")?t(this).html('<i class="fad fa-pencil-alt"></i> Edit entries'):t(this).html('<i class="fas fa-check"></i> Done editing')}))})),n()(".goty-edit-entry",(function(){t(this).on("click",(function(){var e=t(this).attr("category"),a=t(this).attr("game_id");t("#goty-search-modal #goty-category").html("goty"===e?"GOTY":e),t("#goty-search-modal #goty-category").attr("slug",e),t("#goty-search-modal").attr("game_id",a),a?t("#goty-search-modal #goty-remove-entry-container").removeClass("d-none"):t("#goty-search-modal #goty-remove-entry-container").addClass("d-none"),p.default.show("goty-search-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0,disableScroll:!0})}))})),n()("#goty-results-tabs button",(function(){t(this).on("click",(function(){t(this).hasClass("active")||(t("#goty-results-tabs button").removeClass("active"),t(this).addClass("active"),t("#goty-results-tabs #goty_friends").hasClass("active")?t.ajax({type:"GET",url:"/render/goty_entries/",data:{type:"friends",year:"2022"},success:function(e){t("#goty-entries").html(e)}}):t("#goty-results-tabs #goty_everyone").hasClass("active")&&t.ajax({type:"GET",url:"/render/goty_entries/",data:{type:"everyone",year:"2022"},success:function(e){t("#goty-entries").html(e)}}))}))})),n()("#goty-list-save",(function(){t(this).on("click",(function(){var e={};t(".goty-entry-data").each((function(a){e[t(this).attr("category")]=t(this).attr("game_id")})),t.ajax({type:"POST",url:"/goty/submit/",data:{submissions:e}})}))})),n()("#goty-remove-entry",(function(){t(this).on("click",(function(){var e=t("#goty-category").attr("slug");t.ajax({type:"PUT",url:"/goty/update/cover/",data:{game_id:null,category:e}}),t.ajax({type:"POST",url:"/goty/entry/submit/",data:{game_id:null,category:e}}),t("#"+e+" .entry-game-name a h2").html("-"),t("#"+e+" .goty-edit-entry").attr("game_id",null),p.default.close("goty-search-modal")}))})),n()(".goty-entry-select",(function(){t(this).on("click",(function(){var e=t("#goty-category").attr("slug"),a=t(this).attr("game_name"),n=t(this).attr("game_id");t("#"+e+" .goty-entry-edit .entry-search-input").val(a),t("#"+e+" .goty-entry-data").attr("game_id",n),t("#"+e+" .goty-entry-confirmation").removeClass("hide"),t("#"+e+" .game-search-container").html(""),t("#"+e+" .game-search-container").addClass("d-none"),t("#"+e+" .entry-game-name a h2").html(a),t("#"+e+" .goty-edit-entry").attr("game_id",n),p.default.close("goty-search-modal"),t(".entry-search-input").val(""),t("#game-search-container").addClass("d-none"),t("#game-search-container-played").removeClass("d-none"),t.ajax({type:"PUT",url:"/goty/update/cover/",data:{game_id:n,category:e}}),t.ajax({type:"POST",url:"/goty/entry/submit/",data:{game_id:n,category:e}})}))})),n()(".goty-entry-edit .entry-search-input",(function(){t(this).on("input",(function(){var e=t(this).val(),a=t(this).attr("category"),n=t(this).attr("year");e.length<2?(t("#game-search-container-played").removeClass("d-none"),t("#game-search-container").addClass("d-none")):h(e,a,n)}))})),n()('#activity-options input[type="checkbox"]',(function(){t(this).on("change",(function(){t("#activity-filter-btns").removeClass("d-none")}))})),n()("#reset-activity-filters",(function(){t(this).on("click",(function(){window.location.href=t(this).attr("org_url")}))})),n()("#set-default-activity-filters",(function(){t(this).on("click",(function(){var e="",a=t(this).attr("org_url");t("#activity-options input[type='checkbox']:checked").length==t("#activity-options input[type='checkbox']").length?e="":(t("#activity-options input[type='checkbox']:checked").each((function(a){e+=t(this).val()+","})),e=e.slice(0,-1)),t.ajax({url:"/user/settings/default_activities/",method:"POST",data:{activities_default:e},success:function(t){window.location.href=a},error:function(t,e,a){l.a.success("Error saving default settings: "+a)}})}))})),n()("#apply-activity-filters",(function(){t(this).on("click",(function(){if(t("#activity-options input[type='checkbox']:checked").length!=t("#activity-options input[type='checkbox']").length){var e="";t("#activity-options input[type='checkbox']:checked").each((function(a){e+=t(this).val()+","})),e.length<1||(e=e.slice(0,-1),window.location.href=t(this).attr("org_url")+e+"/")}else window.location.href=t(this).attr("org_url")+"all/"}))})),n()("#next_link",(function(){t(this).on("click",(function(){t(this).prop("disabled",!0),t(this).html('<div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>');var e=t(this).attr("href");t(this).attr("href",null),e&&t.getScript(e,(function(t){n()()}))}))})),n()("#play_toggle_checkbox",(function(){t(this).is(":checked")&&"true"!=t(this).attr("locked")||t(".played-fields-lock").removeClass("d-none"),"true"!=t(this).attr("locked")&&t(this).on("change",(function(){t(this).is(":checked")?t(".played-fields-lock").addClass("d-none"):t(".played-fields-lock").removeClass("d-none")}))})),n()(".admin-back",(function(){t(this).on("click",(function(){return window.history.go(-1),!1}))})),n()("#comment-privacy-dropdown .nav-link",(function(){t(this).on("click",(function(){var e=t(this),a=t(this).attr("model_type");t.ajax({type:"PATCH",url:"/"+a+"/comment/privacy/",data:{model_id:t(this).attr("model_id"),privacy:t(this).attr("privacy")},success:function(a){t("#comment-privacy-button-text").html(e.html()),t("#comment-privacy-dropdown .nav-link").removeClass("current-sort"),e.addClass("current-sort"),l.a.success("Comment privacy setting updated")}})}))})),n()(".spoiler-warning button",(function(){t(this).on("click",(function(){var e=t(this).attr("review_id");t(".spoiler-warning[review_id="+e+"]").addClass("d-none"),t(".review-body[review_id="+e+"]").removeClass("d-none"),t(".expand-review-col[review_id="+e+"]").removeClass("d-none")}))})),n()("#game-profile, #stats-game-banner",(function(){t("#main-gradient").removeClass("d-none"),t("#primary-nav").addClass("hide-border")})),n()("#cookie-banner-accept",(function(){void 0===i.a.get("ne_cookies_consent")&&t("#cookie-banner").removeClass("d-none"),t(this).on("click",(function(){i.a.set("ne_cookies_consent",!0,{sameSite:"strict",expires:365}),t("#cookie-banner").addClass("d-none")}))})),n()(".cookie-banner-deny",(function(){t(this).on("click",(function(){i.a.set("ne_cookies_consent",!1,{sameSite:"strict",expires:365}),l.a.success("Non-essential cookies disabled"),t("#cookie-banner").addClass("d-none")}))})),n()(".toggle-fade",(function(){i.a.get("fade_played")&&t(this).addClass("active")})),n()("#toggle-fade-played-box",(function(){t(this).prop("checked",i.a.get("fade_played")),t(this).on("change",(function(){t(this).is(":checked")?i.a.set("fade_played",t(this).is(":checked"),{sameSite:"strict",expires:365}):i.a.remove("fade_played"),t(".toggle-fade").toggleClass("active")}))})),n()("body",(function(){i.a.get("high_contrast")&&t(this).addClass("high-contrast")})),n()("#high-contrast-colors",(function(){t(this).prop("checked",i.a.get("high_contrast")),t(this).on("change",(function(){t(this).is(":checked")?i.a.set("high_contrast",t(this).is(":checked"),{sameSite:"strict",expires:365}):i.a.remove("high_contrast"),t("body").toggleClass("high-contrast")}))})),n()(".card .quick-access-bar",(function(){var e=t(this).parent().width();e>143?(t(this).addClass("btns-bigger2"),t(this).width(.6*t(this).parent().width())):e>130?(t(this).addClass("btns-bigger2"),t(this).width(.7*t(this).parent().width())):e>115&&(t(this).addClass("btns-bigger"),t(this).width(.8*t(this).parent().width()))})),n()(".wishlist-btn-container .btn-play, .wishlist-btn-container .log-type-btn",(function(){t(this).on("click",(function(){t(this).prop("disabled",!0),t(this).parent().toggleClass("btn-play-fill");var e=t(this);t.ajax({type:"POST",url:"/log/",data:{type:"wishlist",game_id:t(this).attr("game_id"),no_refresh:t(this).hasClass("no_refresh")},success:function(t){e.prop("disabled",!1)}})}))})),n()(".playing-btn-container .btn-play, .playing-btn-container .log-type-btn",(function(){t(this).on("click",(function(){t(this).prop("disabled",!0),t(this).parent().toggleClass("btn-play-fill");var e=t(this);t.ajax({type:"POST",url:"/log/",data:{type:"playing",game_id:t(this).attr("game_id")},success:function(t){e.prop("disabled",!1)}})}))})),n()(".backlog-btn-container .btn-play",(function(){t(this).on("click",(function(){t(this).prop("disabled",!0),t(this).parent().toggleClass("btn-play-fill");var e=t(this);t.ajax({type:"POST",url:"/log/",data:{type:"backlog",game_id:t(this).attr("game_id")},success:function(t){e.prop("disabled",!1)}})}))})),n()(".play-btn-container .btn-play",(function(){t(this).on("click",(function(){if(t(this).parent().hasClass("btn-play-fill")){var e=t(this);p.default.show("quick-play-type-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0,onShow:function(){t("#quick-play-type-modal .play-type-option").removeClass("filled");var a=e.attr("play_type");t("#quick-play-type-modal .play-type-option#"+a).addClass("filled"),t("#quick-play-type-modal").attr("game_id",e.attr("game_id"))}})}else{t(this).prop("disabled",!0),t(this).parent().addClass("btn-play-fill");var a=t(this);t.ajax({type:"POST",url:"/log/",data:{type:"play",game_id:t(this).attr("game_id")},success:function(t){console.log(t),a.prop("disabled",!1),a.attr("play_type",t.status),a.css("color","var(--back-type-"+t.status+")")}})}}))})),n()("#quick-play-type-modal .play-type-option",(function(){t(this).on("click",(function(){p.default.close("quick-play-type-modal");var e=t("#quick-play-type-modal").attr("game_id");t.ajax({type:"PATCH",url:"/log/status/",data:{game_id:e,status_id:t(this).attr("status")},success:function(a){t(".play-btn-container#play-"+e+" button").attr("play_type",a.status),t(".play-btn-container#play-"+e+" button").css("color","var(--back-type-"+a.status+")"),t(".play-btn-container#play-"+e+" button").blur()}})}))})),n()("#quick-play-type-modal #unset-played-btn",(function(){t(this).on("click",(function(){p.default.close("quick-play-type-modal");var e=t("#quick-play-type-modal").attr("game_id");t("#quick-play-type-modal").attr("game_id",""),t.ajax({type:"POST",url:"/log/",data:{type:"play",game_id:e},success:function(a){t(".play-btn-container#play-"+e).removeClass("btn-play-fill"),t(".play-btn-container#play-"+e+" button").css("color",""),t(".play-btn-container#play-"+e+" button").attr("play_type",""),t(".play-btn-container#play-"+e+" button").removeClass("play-type-color"),t(".play-btn-container#play-"+e+" button").blur()}})}))})),n()("#game-played-container #game-played-btn",(function(){t(this).on("click",(function(){t(this).prop("disabled",!0),t("#game-played-container").toggleClass("unplayed");var e=t(this);t.ajax({type:"POST",url:"/log/",data:{type:"play",game_id:t(this).attr("game_id")},success:function(t){e.prop("disabled",!1)}})}))})),n()(".star-rating .rate .star-radio",(function(){t(this).on("click",(function(){console.log(t("#play-"+t(this).attr("game_id")+" .btn-play")),t("#play-"+t(this).attr("game_id")+" .btn-play").prop("disabled",!0)}))})),n()("#journal-help",(function(){t(t(this)[0]).popover({content:"<b>Log:</b> Edit your latest log details here, you can also use the Journal to mark each day you've played for that log.<br><br><b>Game Status:</b> Edit data on a game-wide level. Specifically data that is not tied to single log but the game itself.",offset:"40.75%p",trigger:"focus",html:!0}),t(this).on("click",(function(){t(this).popover("toggle")}))})),n()("#review-formatting-tooltip",(function(){t(t(this)[0]).popover({content:"<u><b>Formatting Markdown</b></u><br><i>sample</i> - *sample*<br><b>sample</b> - **sample**<br><u>sample</u> - _sample_<br><s>sample</s> - ~~sample~~<br><a href='https://www.backloggd.com'>sample</a> - [sample](backloggd.com)",offset:"40.75%p",trigger:"focus",html:!0}),t(this).on("click",(function(){t(this).popover("toggle")}))})),n()(".like-heart.button-link",(function(){t(this).on("click",(function(){var e=t(this).attr("model_id"),a=t(this).attr("model"),n=parseInt(t("[like_counter_text="+a+"-"+e+"]").attr("likes")),o=t('button.like-heart[model_id="'+e+'"][model="'+a+'"]');o.prop("disabled",!0),t(this).hasClass("liked")?(n-=1,t.ajax({type:"DELETE",url:"/unlike/"+a+"/"+e,success:function(){o.prop("disabled",!1)}})):(n+=1,t.ajax({type:"POST",url:"/like/"+a+"/"+e,success:function(){o.prop("disabled",!1)}})),o.toggleClass("liked"),1==n?t("[like_counter_text="+a+"-"+e+"]").html(n+" Like"):t("[like_counter_text="+a+"-"+e+"]").html(n+" Likes"),t("[like_counter_text="+a+"-"+e+"]").attr("likes",n)}))})),n()(".readmore-content",(function(){new d.default(t(this).get(),{collapsedHeight:150,speed:200,lessLink:'<a href="#" class="readmore-open"><i class="fa-solid fa-arrow-turn-up"></i> Close</a>',moreLink:'<a href="#" class="readmore-closed"><i class="fa-solid fa-arrow-turn-down"></i> Expand</a>',beforeToggle:function(e,a,n){t(a).siblings(".note-background").toggleClass("d-none")},blockProcessed:function(e,a){a&&(console.log(e),t("<div class='readmore-background gradient'></div>").insertAfter(e.nextElementSibling))}})})),n()("#bio-body",(function(){new d.default(t(this).get(),{speed:200,collapsedHeight:300,lessLink:'<a href="#" class="readmore-open"><i class="fa-solid fa-arrow-turn-up"></i> Close</a>',moreLink:'<a href="#" class="readmore-closed"><i class="fa-solid fa-arrow-turn-down"></i> Expand</a>',beforeToggle:function(e,a,n){t(a).siblings(".note-background").toggleClass("d-none")},blockProcessed:function(e,a){a&&t("<div class='readmore-background gradient'></div>").insertAfter(e.nextElementSibling)}})})),n()("#review-sorting + .dropdown-sort .nav-link",(function(){t(this).on("click",(function(){var e=t("#game-page-id").attr("game_id"),a=t(".game-slug-container").attr("id");t("#review-sorting .nav-label").html(t(this).html()),t("#review-sorting + .dropdown-sort .nav-link").removeClass("current-sort"),t(this).addClass("current-sort"),t.ajax({type:"GET",url:"/render/game_reviews",data:{sort:t(this).attr("sorting"),game_id:e,game_slug:a}})}))})),n()("#review-sort-picker",(function(){t(this).selectpicker(),t(this).on("changed.bs.select",(function(e,a,n,o){var i=t("#game-page-id").attr("game_id"),s=t(".game-slug-container").attr("id");t.ajax({type:"GET",url:"/render/game_reviews",data:{sort:e.target.value,game_id:i,game_slug:s}})}))})),t(document).on("turbolinks:load",(function(){g("#artwork-high-res",(function(){t("#artwork-low-res").addClass("d-none")})),t("#infinite-scrolling").length>0&&t(window).on("scroll",(function(){var e=t("#infinite-scrolling .next_page").attr("href");if(e&&t(window).scrollTop()>t(document).height()-t(window).height()-230)return t(".pagination").html('<div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>'),void t.getScript(e)})),(adsbygoogle=window.adsbygoogle||[]).push({})}))}.call(this,a(7))},118:function(t,e,a){"use strict";a.r(e),function(t){var e=a(74),n=a.n(e),o=a(3),i=a(0),s=a(103),l=a.n(s),r=a(70),c=a(71),d=a(1),u=a.n(d),p=(a(28),a(73)),m=a.n(p),g=a(5),h=a.n(g),f=a(4);function v(t,e,a,n,o,i,s){try{var l=t[i](s),r=l.value}catch(c){return void a(c)}l.done?e(r):Promise.resolve(r).then(n,o)}function y(t){return function(){var e=this,a=arguments;return new Promise((function(n,o){var i=t.apply(e,a);function s(t){v(i,n,o,s,l,"next",t)}function l(t){v(i,n,o,s,l,"throw",t)}s(void 0)}))}}var b=a(91),_=a(137),k=a(99),w=null,C={},x={},j={},E={},T=!0,O=!0,P=null,S=[],D=!1,A=-2,q=null;function L(){return(L=y(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!q){t.next=4;break}return t.next=3,q;case 3:q=null;case 4:O&&(E=et(),O=!1,T=!0);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(t){return{id:t,created_at:null,title:t<-1?"Log "+-t:"Log",rating:x?x.rating:0}}function F(t,e){var a=new Date(t);return a.setDate(a.getDate()+e),a}function H(t){return t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function U(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();return e?o+"-"+n+"-"+a:t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function R(e){var a=e.extendedProps,n=new Date(t("#started-on-fillin").attr("date")),i=new Date(t("#finished-on-fillin").attr("date"));t.ajax({type:"POST",url:"/open-date-modal/",data:{play_data:{privacy:a.privacy,note:a.note,status:a.status,id:e.id,hours:a.hours,finish_date:a.finish_date,start_date:a.start_date,minutes:a.minutes,start:H(e.start),end:H(F(e.end,-1)),tags:a.tags,disableStart:i<e.start,disableFinish:n>F(e.end,-1)}},success:function(e){t("#playthrough-modal-content").html(e),u()(),D=!1;var n=document.querySelector("#play-session-tags");(P=new m.a(n,{maxTags:8,editTags:!1,pattern:/^[\w, -]{1,24}$/,transformTag:function(t){t.value=t.value.toLowerCase()},callbacks:{input:function(e){"pattern mismatch"==e.detail.isValid&&","!=e.detail.value[e.detail.value.length-1]?(t("#tags-char-warning").removeClass("d-none"),t(".backloggd-tags").addClass("over-char-warning")):(t("#tags-char-warning").addClass("d-none"),t(".backloggd-tags").removeClass("over-char-warning"))},invalid:function(e){t("#tags-char-warning").addClass("d-none"),t(".backloggd-tags").removeClass("over-char-warning")}},whitelist:S,dropdown:{classname:"tagify-dropdown",enabled:0,maxItems:3,position:"text",closeOnSelect:!1}})).addTags(a.tags),o.default.show("playthrough-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0,onClose:function(t){D=!0}})}})}function I(e){var a=e;"string"==typeof e&&(a=new Date(e)),t.each(w.getEvents(),(function(e,n){if(n.extendedProps.start_date&&(n.setExtendedProp("start_date",null),n.setExtendedProp("edited",!0)),a<n.end&&a>=n.start){n.setExtendedProp("start_date",a),n.setExtendedProp("edited",!0),t("[data-date]").removeClass("start-tag");var o=U(a,!0);t("[data-date="+o+"]").addClass("start-tag").addClass("position-relative"),B("#started-on-fillin",a)}}))}function G(e){var a=e;"string"==typeof e&&(a=new Date(e)),t.each(w.getEvents(),(function(e,n){if(n.extendedProps.finish_date&&(n.setExtendedProp("finish_date",null),n.setExtendedProp("edited",!0)),a<n.end&&a>=n.start){n.setExtendedProp("finish_date",a),n.setExtendedProp("edited",!0),t("[data-date]").removeClass("finish-tag");var o=U(a,!0);t("[data-date="+o+"]").addClass("finish-tag").addClass("position-relative"),B("#finished-on-fillin",a)}}))}function B(e,a){t("#log-dates-section-control").prop("checked",!0),t("#log-dates-section").removeClass("d-none"),t(e).addClass("filled").attr("date",a),t(e+" .date-text").html(U(a))}function z(e){t(e).removeClass("filled").attr("date",null),t(e+" .date-text").html(""),t("#log-dates-section .fill-in").hasClass("filled")||(t("#log-dates-section-control").prop("checked",!1),t("#log-dates-section").addClass("d-none"))}function Y(e){var a=null;return t.each(w.getEvents(),(function(t,n){new Date(e)<new Date(n.end)&&new Date(e)>=new Date(n.start)&&(a=n)})),a}function W(t){var e=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();return n<10&&(n="0"+n),a<10&&(a="0"+a),e+"-"+a+"-"+n}function V(e){var a=[];return t.each(e,(function(t,e){a.push({id:e.id,title:"Played",start:e.range_start_date,end:e.range_end_date,allDay:!0,backgroundColor:"#ea377a",borderColor:"#ea377a",extendedProps:{edited:e.edited,status:e.status,note:e.note,hours:e.hours,minutes:e.minutes,start_date:e.start_date,finish_date:e.finish_date,privacy:e.privacy,tags:e.tags}})})),a}function N(e){null!=w&&(w.destroy(),w=null);var a=t("#playthrough-calendar");if(null!=a[0]){var n,o;w=new i.Calendar(a[0],{timeZone:"local",locales:l.a,locale:navigator.language,plugins:[r.default,c.default],defaultView:"dayGridMonth",defaultDate:(n=e,o=null,t.each(n,(function(t,e){(null==o||new Date(e.end)>new Date(o))&&(o=new Date(e.end))})),o=null==o?new Date:new Date(o)),forceEventDuration:!0,longPressDelay:10,selectable:!0,selectOverlap:!1,contentHeight:"auto",events:e,header:!1,editable:!0,eventOverlap:!1,select:function(t){w.addEvent({id:-(w.getEvents().length+1),title:"Played",start:t.start,end:t.end,backgroundColor:"#ea377a",borderColor:"#ea377a",allDay:!0,extendedProps:{note:"",hours:null,minutes:null,status:5,edited:!0,finish_date:null,start_date:null,privacy:null}})},eventClick:function(t){R(t.event)},eventResize:function(e){if(e.event.setExtendedProp("edited",!0),e.event.extendedProps.finish_date){var a=new Date(t("#finished-on-fillin").attr("date")),n=F(e.event.end,-1);n<a&&G(n)}if(e.event.extendedProps.start_date){var o=new Date(t("#started-on-fillin").attr("date")),i=F(e.event.end,-1);i<o&&I(i)}},eventDrop:function(e){e.event.setExtendedProp("edited",!0);var a=e.delta.days,n=new Date(t("#started-on-fillin").attr("date")),o=new Date(t("#finished-on-fillin").attr("date"));if(e.event.extendedProps.start_date&&(n&&o&&e.event.start>o&&n.getTime()!==o.getTime()?I(o):I(F(n,a))),e.event.extendedProps.finish_date){var i=F(e.event.end,-1);n&&o&&i<n&&n.getTime()!==o.getTime()?G(n):G(F(o,a))}},datesRender:function(e){void 0!=t("#finished-on-fillin").attr("date")&&G(t("#finished-on-fillin").attr("date")),void 0!=t("#started-on-fillin").attr("date")&&I(t("#started-on-fillin").attr("date"))}}),tt(),1==e.length?t("#playthrough-date-range").html(e.length+" Session Logged"):e.length>1&&t("#playthrough-date-range").html(e.length+" Sessions Logged"),w.render(),w.updateSize(),function(){L.apply(this,arguments)}();var s=w.getDate();t("#month-selector").selectpicker("val",s.getMonth()),t("#year-selector").selectpicker("val",s.getFullYear())}}var J=function(){var e=t("#current_playthrough").val();t(".game-id-container").attr("game_id");"true"===h.a.get("advanced_open")&&(t("#log-advanced-section-control").addClass("fa-rotate-180"),t("#log-advanced-section").removeClass("d-none"),t("#btn-destroy-all-logs-v2").attr("log_id")&&""!==t("#btn-destroy-all-logs-v2").attr("log_id")?t("#btn-destroy-all-logs-v2").removeClass("d-none"):t("#btn-destroy-all-logs-v2").addClass("d-none")),j[e]&&j[e].play_dates&&j[e].play_dates.length>0?(console.log("Build existing calendar..."),N(V(j[e].play_dates))):(console.log("Build empty calendar..."),N([]))};function Q(e){"library"==e?t("#mobile-library-panel").addClass("current"):(t(".mobile-panel .mobile-sub-panel").removeClass("current"),t(".mobile-panel .mobile-sub-panel#mobile-"+e+"-panel").addClass("current"),t("#mobile-library-panel").removeClass("current")),"journal"==e&&t(window).width()<950&&t(window).height()<745?t("#mobile-library-panel").addClass("hide-panel"):t("#mobile-library-panel").removeClass("hide-panel"),t("#journal-bottom-navigation .nav-button").removeClass("current"),t("#journal-bottom-navigation .nav-button i").removeClass("fas").addClass("fal"),t('#journal-bottom-navigation .nav-button[type="'+e+'"]').addClass("current"),t('#journal-bottom-navigation .nav-button[type="'+e+'"] i').addClass("fas").removeClass("fal")}function $(){var e=Object(f.e)();"hybrid"==e?(t("#game-log").toggleClass("d-none"),t("#game-journal").toggleClass("d-none"),t("#daily-journal-view-btn .col").toggleClass("current")):"quick"==e?(t("#game-log").toggleClass("d-none"),t("#game-journal").toggleClass("d-none"),t(".journal-section-nav").removeClass("current"),t(".journal-section-nav#journal-nav").addClass("current")):"mobile"==e&&Q("journal")}function Z(e){if(b(e))t("#library-entries-more").addClass("d-none");else{var a=_(e);t.each(e,(function(e,a){t('#journal-log-library-entries-modal input[platform_id="'+a.platform_id+'"][ownership_id="'+a.ownership_id+'"]').attr("entry_id",e).prop("checked",!0)})),q=new Promise((function(n,o){t.ajax({type:"GET",url:"/collections/render/",data:{entries:e,modal_type:Object(f.e)()},success:function(e){if(t("#library-entries-empty").addClass("d-none"),t("#library-entries-headers").removeClass("d-none"),t("#journal-game-modal .collection-section").html(e.partials),n(),"full"==Object(f.e)()){if(t("#library-entries-full .collection-section-full").html(e.full_partials),a<4)t("#library-entries-more").addClass("d-none");else{var o=a-3;t("#library-entries-more").removeClass("d-none"),t("#library-entries-more p").text("+ "+o+" other"+(o>1?"s":""))}t(".library-entry-display .platform-entry-full").each((function(e){var a=t(this).attr("platform_id");t(this).html(t('#game-platform-options option[value="'+a+'"]').html())}))}u()(),A-=a},error:function(t){n()}})}))}}var K=function(){if(!b(x)){t("#journal-game-modal #log_id").val(x.id),t("#btn-destroy-all-logs button, #btn-destroy-all-logs-v2").attr("log_id",x.id),""===x.id||"full"!==Object(f.e)()&&"mobile"!==Object(f.e)()||t("#btn-destroy-all-logs-v2").removeClass("d-none"),t("#journal-game-modal #play-label-title").html(Object(f.d)(x.status)),t("#journal-game-modal #status").val(x.status),t("#journal-game-modal #game-status-selector").removeClass("completed mastered abandoned shelved retired played").addClass(x.status),t("#journal-game-modal #play-toggle-label").removeClass("completed mastered abandoned shelved retired played").addClass(x.status),t("#journal-game-modal #play_toggle_checkbox").prop("checked",x.is_play),t("#journal-game-modal #playing_toggle_checkbox").prop("checked",x.is_playing),t("#journal-game-modal #backlog_toggle_checkbox").prop("checked",x.is_backlog),t("#journal-game-modal #wishlist_toggle_checkbox").prop("checked",x.is_wishlist);var e=x.total_hours,a=x.total_minutes,n=0==x.time_source||void 0==e&&void 0==a||0==e&&0==a;0==x.time_source&&(t("#journal-game-modal #log-time-played-hours").val(x.total_hours),t("#journal-game-modal #log-time-played-minutes").val(x.total_minutes)),n?(t("#journal-game-modal #log-time-played-hours").prop("placeholder","HH"),t("#journal-game-modal #log-time-played-minutes").prop("placeholder","MM")):(t("#journal-game-modal #log-time-played-hours").prop("placeholder",x.total_hours_formatted),t("#journal-game-modal #log-time-played-minutes").prop("placeholder",x.total_minutes_formatted)),t("#journal-game-modal #log-time-played-hours").prop("disabled",0!==x.time_source),t("#journal-game-modal #log-time-played-minutes").prop("disabled",0!==x.time_source),t("#journal-game-modal #use-logs-time").prop("checked",1===x.time_source),t("#journal-game-modal #use-sessions-time").prop("checked",2===x.time_source),Z(x.library_entries)}};function X(e){var a=nt(),n=0;t(".time-checkbox-option#use-logs-time").is(":checked")?n=1:t(".time-checkbox-option#use-sessions-time").is(":checked")&&(n=2),b(x)&&(x={}),x.is_play=t("#play_toggle_checkbox").is(":checked"),x.is_playing=t("#playing_toggle_checkbox").is(":checked"),x.is_backlog=t("#backlog_toggle_checkbox").is(":checked"),x.is_wishlist=t("#wishlist_toggle_checkbox").is(":checked"),x.status=t("#status").val(),x.id=t("#log_id").val(),"full"!==e&&"hybrid"!==e&&"mobile"!==e||(x.library_entries=a,x.total_hours=t("#log-time-played-hours").val(),x.total_minutes=t("#log-time-played-minutes").val(),x.time_source=n)}function tt(){var e=t("#current_playthrough").val();e in j||(j[e]={id:e});var a=t("#playthrough-medium").val(),n=null;null!=a&&(n=a[0]);var o=t("#playthrough_platform").val(),i=null;null!=o&&(i=o[0]);var s=t("#playthrough-platform-emulated").val(),l=null;null!=s&&"true"===t("#playthrough-platform-emulated").attr("user-edited")&&(l=s[0]);var r,c,d=t("#started-on-fillin").attr("date"),u=t("#finished-on-fillin").attr("date");j[e].created_at=t("#current_playthrough").attr("created_at"),j[e].rating=t('#modal-rating input[name="rating_modal"]:checked').val(),j[e].review=t("#review").val(),j[e].review_spoilers=t("#log_spoilers_checkbox").is(":checked"),j[e].platform=i,j[e].hours=t("#playthrough-time-played-hours").val(),j[e].minutes=t("#playthrough-time-played-minutes").val(),j[e].is_master=t("#playthrough-mastered").is(":checked"),j[e].is_replay=t("#playthrough-replay").is(":checked"),j[e].title=t("#log-title-field").val(),j[e].play_dates=(r=w.getEvents(),c=[],t.each(r,(function(t,e){var a=W(e.start),n=W(e.end);c.push({id:e.id,range_start_date:a,range_end_date:n,edited:e.extendedProps.edited,status:e.extendedProps.status,note:e.extendedProps.note,hours:e.extendedProps.hours,minutes:e.extendedProps.minutes,start_date:e.extendedProps.start_date,finish_date:e.extendedProps.finish_date,privacy:e.extendedProps.privacy,tags:e.extendedProps.tags})})),c),j[e].start_date=d?U(new Date(d),!0):null,j[e].finish_date=u?U(new Date(u),!0):null;var p=Object(f.e)();"full"!==p&&"hybrid"!==p&&"mobile"!==p||(j[e].medium_id=n,j[e].played_platform=l)}function et(){var e=t(".game-id-container").attr("game_id");X(Object(f.e)());var a={log:t.extend(!0,{},x),game_id:e};return null==w||0==j.length||(tt(),a.playthroughs=t.extend(!0,{},j)),a}function at(e,a){var n=et(),o=[],i={};t.each(n.playthroughs,(function(e,a){console.log(e+" edited: "+!k(a,E.playthroughs[e])),t.each(a.play_dates,(function(t,e){e.edited&&(void 0==i[a.id]?i[a.id]=[e]:i[a.id].push(e))})),k(a,E.playthroughs[e])||(delete a.play_dates,o.push(a)),console.log(a),console.log(E.playthroughs[e])})),void 0!==a&&a.prop("disabled",!0),t.ajax({type:"POST",url:"/api/user/"+e+"/log/"+n.game_id,data:{game_id:n.game_id,playthroughs:o,dates:i,log:n.log,deleted_dates:C,modal_type:Object(f.e)()},success:function(e){T=!1;var a=Object(f.e)();"mobile"!=a&&h.a.set("game-log-editor-mode",a,{sameSite:"strict",expires:365}),t("#journal-game-modal").modal("hide")}})}function nt(){var e={};return"full"!==Object(f.e)()?t(".library-entry").each((function(a){var n=t(this).attr("entry_id");e[n]={platform_id:t('.library-plat-selectpicker[entry_id="'+n+'"]').val(),ownership_id:t('.library-entry-ownership[entry_id="'+n+'"]').val()[0]}})):t("#journal-log-library-entries-modal input:checked").each((function(a){var n=t(this).attr("platform_id"),o=t(this).attr("ownership_id"),i=t(this).attr("entry_id");e[i]={platform_id:n,ownership_id:o}})),e}window.fillPlaythroughFields=function(e){var a=j[e];e>=0?t(".save-log").html("Save Changes"):t(".save-log").html("Create Log"),t("#playthrough_platform").html(t("#game-platform-options").html()),0==t('#playthrough_platform option[value="'+a.platform+'"]').length&&(t("#playthrough_platform").append(t('#playthrough-platform-emulated option[value="'+a.platform+'"]').clone()),t('#playthrough_platform option[value="'+a.platform+'"]').attr("data-icon","fas fa-exclamation-triangle").attr("data-subtext","removed")),t("#playthrough_platform").selectpicker("refresh");var n=e<-1,o=a.minutes>0||a.hours>0;t("#current_playthrough").attr("created_at",a.created_at?a.created_at:null),t('#modal-rating input[name="rating_modal"]').prop("checked",!1),t("#modal-rating #rating_modal_"+a.rating).prop("checked",!0),a.rating>0?t("#modal-rating .cancel-rating").removeClass("d-none"):t("#modal-rating .cancel-rating").addClass("d-none"),t("#review").val(a.review),t("#log_spoilers_checkbox").prop("checked",!!a.review_spoilers&&a.review_spoilers),t("#playthrough_platform").selectpicker("val",a.platform?a.platform:null),t("#playthrough-platform-emulated").selectpicker("val",a.played_platform?a.played_platform:a.platform),t("#playthrough-platform-emulated").attr("user-edited",null!==a.played_platform),t("#playthrough-medium").selectpicker("val",a.medium_id),t("#playthrough-time-played-hours").val(o?a.hours:null),t("#playthrough-time-played-minutes").val(o?a.minutes:null),t("#playthrough-mastered").prop("checked",!!a.is_master&&a.is_master),t("#playthrough-replay").prop("checked",a.is_replay?a.is_replay:n),t("#log-title-field").val(a.title),t(".journal-section-nav#log-nav").html(a.title),-1===e?t("#log-selector-btn-container").addClass("d-none"):(t("#log-selector-btn-container").removeClass("d-none"),t("#log-selector-btn-text").html(a.title)),void 0==a.start_date&&void 0==a.finish_date||(t("#log-dates-section-control").prop("checked",!0),t("#log-dates-section").removeClass("d-none")),void 0!=a.start_date?B("#started-on-fillin",new Date(a.start_date+"T00:00")):z("#started-on-fillin"),void 0!=a.finish_date?B("#finished-on-fillin",new Date(a.finish_date+"T00:00")):z("#finished-on-fillin")},window.openLogModal=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;T=!1,O=!0,t.ajax({type:"GET",url:"/tags/recent",success:function(t){S=t.tags}}),t.ajax({type:"GET",url:null==n?"/playthrough/game/"+e:"/playthrough/"+n,success:function(n){var i=n.playthrough;x=n.game_log;var s=void 0;o?(j[s=o]=M(s),console.log("New replay, opening modal...")):t.isEmptyObject(i)?(j[s=-1]=M(s),console.log("Playthrough not found, opening modal...")):(s=i.id,j[i.id]=i,console.log("Playthrough found, opening modal...")),t.ajax({type:"POST",url:"/autocomplete-modal/"+e,data:{modal_type:t(window).width()<950?"mobile":h.a.get("game-log-editor-mode")},success:function(e){t("div#journal-game-modal .modal-content").html(e),t("#journal-game-modal").modal({focus:!1}),t("#current_playthrough").val(s),K(),fillPlaythroughFields(s),"full"==Object(f.e)()?(t("#journal-game-modal .modal-content .modal-header").addClass("d-none"),t("#journal-game-modal").addClass("extended-modal")):"mobile"==Object(f.e)()&&t("#journal-game-modal").addClass("modal-fullscreen"),J(),a()}})}})},u()("#library-entries-full",(function(){t(this).on("click",(function(){o.default.show("journal-log-library-entries-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0,onClose:function(){Z(nt())}})}))})),u()("#open-new-game-log-modal-btn",(function(){t(this).on("click",(function(){var e=t(this).attr("game_id"),a=-(Math.abs(t(this).attr("num_playthroughs"))+1);openLogModal(e,(function(){}),null,a)}))})),u()("#switch-editor-to-full",(function(){t(this).on("click",(function(){var e=t(".game-id-container").attr("game_id"),a=t("#current_playthrough").val();X(Object(f.e)()),tt(),t(".save-log").prop("disabled",!0),t.ajax({type:"POST",url:"/autocomplete-modal/"+e,data:{modal_type:"full"},success:function(e){t("div#journal-game-modal .modal-content").html(e),t("#current_playthrough").val(a),K(),fillPlaythroughFields(a),J(),u()()}}),Object(f.g)(t("div#journal-game-modal .modal-content .modal-body")),t("#journal-game-modal .modal-content .modal-header").addClass("d-none"),t("#journal-game-modal").addClass("extended-modal")}))})),u()("#switch-editor-to-quick",(function(){t(this).on("click",(function(){var e=t(".game-id-container").attr("game_id"),a=t("#current_playthrough").val();X(Object(f.e)()),tt(),t(".save-log").prop("disabled",!0),t.ajax({type:"POST",url:"/autocomplete-modal/"+e,data:{modal_type:"quick"},success:function(e){t("div#journal-game-modal .modal-content").html(e),t("#current_playthrough").val(a),K(),fillPlaythroughFields(a),J(),u()()}}),Object(f.g)(t("div#journal-game-modal .modal-content .modal-body")),t("#journal-game-modal").removeClass("extended-modal")}))})),u()(".open-log",(function(){t(this).on("click",(function(){var e=t(this).attr("game_id"),a=t(this).attr("playthrough_id");openLogModal(e,(function(){}),a)}))})),u()(".quick-access-cover",(function(){t(this).on("click",(function(){var e=t(this).attr("game_id");openLogModal(e,(function(){$()}))}))})),u()("#open-game-log-modal-btn, .quick-journal",(function(){t(this).on("click",(function(){var e=t(this).attr("game_id");openLogModal(e)}))})),u()("#journal-bottom-navigation .nav-button",(function(){t(this).on("click",(function(){Q(t(this).attr("type"))}))})),u()("#play-date-update",(function(){t(this).on("click",(function(){o.default.close("playthrough-modal");var e=[];t.each(P.value,(function(t,a){e.push(a.value)}));var a=w.getEventById(t("#play-date-id").attr("date_id")),n=t("#is_finish_session").is(":checked"),i=a.extendedProps.finish_date,s=t("#is_start_session").is(":checked"),l=a.extendedProps.start_date;i&&!n?(t("[data-date]").removeClass("finish-tag"),z("#finished-on-fillin"),i=null):null===i&&n&&(G(i=F(a.end,-1)),t("#play_toggle_checkbox").prop("checked",!0)),l&&!s?(t("[data-date]").removeClass("start-tag"),z("#started-on-fillin"),l=null):null===l&&s&&I(l=a.start),a.setExtendedProp("note",t("#playthrough-modal #note").val()),a.setExtendedProp("status",5),a.setExtendedProp("hours",t("#playthrough-modal #play_date_hours").val()),a.setExtendedProp("minutes",t("#playthrough-modal #play_date_minutes").val()),a.setExtendedProp("privacy",t("#playthrough-modal #note-privacy-dropdown .nav-link.current-sort").attr("privacy")),a.setExtendedProp("finish_date",i),a.setExtendedProp("start_date",l),a.setExtendedProp("tags",e),a.setExtendedProp("edited",!0)}))})),u()("#play-date-close",(function(){t(this).on("click",(function(){o.default.close("playthrough-modal")}))})),u()("#play-date-delete",(function(){t(this).on("click",(function(){Object(f.a)("Are you sure you want to delete this play session?",(function(){}),(function(){o.default.close("playthrough-modal");var e=w.getEventById(t("#play-date-id").attr("date_id")),a=t("#current_playthrough").val();e.id>=0&&(C[a]?C[a].push(e.id):C[a]=[e.id]),e.extendedProps.finish_date&&(t("[data-date]").removeClass("finish-tag"),t("#finished-on-fillin").removeClass("filled"),t("#finished-on-fillin").attr("date",null),t("#finished-on-fillin .date-text").html("")),e.remove(),e.extendedProps.start_date&&(t("[data-date]").removeClass("start-tag"),t("#started-on-fillin").removeClass("filled"),t("#started-on-fillin").attr("date",null),t("#started-on-fillin .date-text").html(""))}),"Cancel","Delete")}))})),u()(".save-log",(function(){t(this).on("click",(function(){at(t(this).attr("user_id"),t(this))}))})),u()("#new-collection-entry-btn",(function(){t(this).on("click",(function(){t.ajax({type:"GET",url:"/collections/new/render/"+A,success:function(e){t("#library-entries-empty").addClass("d-none"),t("#library-entries-headers").removeClass("d-none"),t(".collection-section").append(e),u()(),A-=1}})}))})),u()(".remove-library-entry",(function(){t(this).on("click",(function(){var e=t(this).attr("entry_id");t('.library-entry[entry_id="'+e+'"]').remove(),t(".collection-section").children().length<1&&(t("#library-entries-empty").removeClass("d-none"),t("#library-entries-headers").addClass("d-none"))}))})),u()("#daily-journal-view-btn",(function(){t(this).on("click",(function(){$()}))})),u()(".journal-section-nav",(function(){t(this).on("click",(function(){if(!t(this).hasClass("current")){t(".journal-section-nav").removeClass("current"),t(this).addClass("current");var e=!1;t(this).hasClass("beta-nav")&&(e=!0),t(".journal-section-nav#log-nav").hasClass("current")?(t("#btn-more-log-options, #log-view-btns, #daily-journal-view-btn").removeClass("d-none"),t("#game-collection, #log-details-view-btn").addClass("d-none"),t("#btn-destroy-all-logs button").attr("log_id")&&""!==t("#btn-destroy-all-logs button").attr("log_id")&&t("#btn-destroy-all-logs").addClass("d-none"),e?(t("#game-log").removeClass("d-none"),t("#game-journal").addClass("d-none")):(t("#log-toggle-buttons").addClass("d-none"),t("#log-view-toggle-log-btn").hasClass("current")?t("#game-log").removeClass("d-none"):t("#game-journal").removeClass("d-none"))):t(".journal-section-nav#collection-nav").hasClass("current")?(t("#game-log, #log-view-btns, #game-journal").addClass("d-none"),t("#game-collection, #log-toggle-buttons").removeClass("d-none"),t("#btn-destroy-all-logs button").attr("log_id")&&""!==t("#btn-destroy-all-logs button").attr("log_id")&&t("#btn-destroy-all-logs").removeClass("d-none")):t(".journal-section-nav#journal-nav").hasClass("current")&&(t("#game-log").addClass("d-none"),t("#game-journal").removeClass("d-none"))}}))})),u()("#month-prev",(function(){t(this).on("click",(function(){w.prev();var e=w.getDate();t("#month-selector").selectpicker("val",e.getMonth()),t("#year-selector").selectpicker("val",e.getFullYear())}))})),u()("#month-next",(function(){t(this).on("click",(function(){w.next();var e=w.getDate();t("#month-selector").selectpicker("val",e.getMonth()),t("#year-selector").selectpicker("val",e.getFullYear())}))})),u()("#cancel-journal-rating",(function(){t(this).on("click",(function(){t("#modal-rating input").prop("checked",!1),t("#modal-rating input#rating_modal_0").prop("checked",!0),t(this).addClass("d-none")}))})),u()("#modal-rating input",(function(){t(this).on("click",(function(){t("#cancel-journal-rating").removeClass("d-none"),t("#play_toggle_checkbox").prop("checked",!0)}))})),u()("#log-selector-btn",(function(){t(this).on("click",(function(){var e=t(".game-id-container").attr("game_id");!function(e){var a=t(".game-id-container").attr("game_id");t.ajax({url:"/playthroughs/game/"+a,method:"GET",success:function(a){t.each(a,(function(t,e){t in j||(j[t]=e,console.log("Added "+t+" to playthroughs"))})),e()}})}((function(a){var n={};t.each(j,(function(t,e){n[e.id]={title:e.title,created_at:e.created_at,finish_date:e.finish_date}})),t.ajax({url:"/playthroughs/"+e+"/render",type:"GET",data:{playthroughs:n},contentType:"application/json",success:function(e){t("#journal-log-selection-modal #log-container").html(e),t('.log-selection[playthrough_id="'+t("#current_playthrough").val()+'"]').addClass("filled"),u()()}})})),t("#journal-log-selection-modal #log-container").html('<div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>'),o.default.show("journal-log-selection-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0})}))})),u()(".log-selection",(function(){t(this).on("click",(function(){if(!t(this).prop("disabled")){var e=t(this).attr("playthrough_id");if(t("#current_playthrough").val()==e)return void o.default.close("journal-log-selection-modal");t(".log-selection").prop("disabled",!0),t(".log-selection").removeClass("filled"),t(this).addClass("filled"),tt(),t("#current_playthrough").val(e),fillPlaythroughFields(e),N(V(j[e].play_dates)),t("#log-selector-btn-text").html(t("#playthrough-"+t(this).attr("playthrough_id")+"-title").html()),o.default.close("journal-log-selection-modal")}}))})),u()("#new-log-btn",(function(){t(this).on("click",(function(){t(this).prop("disabled",!0),tt();var e=-(Object.keys(j).length+1);j[e]=M(e),t("#current_playthrough").val(e),fillPlaythroughFields(e),N([]),o.default.close("journal-log-selection-modal"),tt(),t(this).prop("disabled",!1)}))})),t(document).keydown((function(t){27===t.keyCode&&D&&t.stopImmediatePropagation()})),u()("#journal-game-modal",(function(){console.log("Journal Ready!"),t(this).on("shown.bs.modal",(function(){console.log("Start Calendar..."),D=!0,o.default.init({awaitOpenAnimation:!0,awaitCloseAnimation:!0,debugMode:!0})})),u()("#btn-destroy-all-logs button, #btn-destroy-all-logs-v2",(function(){t(this).on("click",(function(){var e=t(".game-id-container").attr("game_id"),a=t(this).attr("log_id");Object(f.a)("Destroy all data about this game? This includes all logs, journal entries, reviews, ratings, library entries, time tracked, etc.. for this game.",(function(){}),(function(){T=!1,t("#journal-game-modal").modal("hide"),t.ajax({type:"DELETE",url:"/unlog/",data:{game_id:e,log_id:a}})}),"Return","Destroy")}))})),t(this).on("hide.bs.modal",(function(){if(console.log(T),!T)return!0;var e=et();return k(e,E)?void 0:(Object(f.c)("Your logs have unsaved changes.",(function(){T=!1,t("#journal-game-modal").modal("hide")}),(function(){at(t("#btn-save-log .save-log").attr("user_id"))})),!1)})),t(this).on("hidden.bs.modal",(function(){null!=w&&(w.destroy(),w=null),C={},[],j={},x={},T=!0,D=!1,t("#journal-game-modal").removeClass("extended-modal").removeClass("modal-fullscreen")}))})),u()("#journal-completion-date-input",(function(){t(this).on("change",(function(){t("#journal-completion-date-calendar").datepicker("update",t(this).val())}))})),u()("#jump-to-today",(function(){t(this).on("click",(function(){var e=new Date;t("#year-selector").selectpicker("val",e.getFullYear()),t("#month-selector").selectpicker("val",e.getMonth()),w.gotoDate(e)}))})),u()("#jump-to-start",(function(){t(this).on("click",(function(){var e=t("#started-on-fillin").attr("date");if(void 0!==e){var a=new Date(e);t("#year-selector").selectpicker("val",a.getFullYear()),t("#month-selector").selectpicker("val",a.getMonth()),w.gotoDate(a)}}))})),u()("#jump-to-finish",(function(){t(this).on("click",(function(){var e=t("#finished-on-fillin").attr("date");if(void 0!==e){var a=new Date(e);t("#year-selector").selectpicker("val",a.getFullYear()),t("#month-selector").selectpicker("val",a.getMonth()),w.gotoDate(a)}}))})),u()("#journal-completion-date-submit",(function(){t(this).on("click",(function(){var e=t("#journal-completion-date-calendar").datepicker("getDate");o.default.close("journal-completion-date-modal");var a=t("#journal-completion-date-modal").attr("field");t("#journal-completion-date-modal").attr("field",""),B("#"+a,e),"started-on-fillin"==a?function(t){"string"==typeof t&&(t=new Date(t));var e=-(w.getEvents().length+1),a=Y(t);null==a&&(a=w.addEvent({id:e,title:"Played",start:t,end:F(t,1),backgroundColor:"#ea377a",borderColor:"#ea377a",allDay:!0,extendedProps:{start_date:t,finish_date:null,note:"",hours:null,minutes:null,status:5,edited:!0}}),w.render(),w.gotoDate(t)),I(t)}(e):"finished-on-fillin"==a&&(!function(t){"string"==typeof t&&(t=new Date(t));var e=-(w.getEvents().length+1),a=Y(t);null==a&&(a=w.addEvent({id:e,title:"Played",start:t,end:F(t,1),backgroundColor:"#ea377a",borderColor:"#ea377a",allDay:!0,extendedProps:{start_date:null,finish_date:t,note:"",hours:null,minutes:null,status:5,edited:!0}}),w.render(),w.gotoDate(t)),G(t)}(e),t("#play_toggle_checkbox").prop("checked",!0)),t("#year-selector").selectpicker("val",e.getFullYear()),t("#month-selector").selectpicker("val",e.getMonth()),t("#journal-completion-date-calendar").datepicker("destroy")}))})),u()("#started-on-fillin, #finished-on-fillin",(function(){t(this).on("click",(function(){var e=Y(t(this).attr("date"));if(null==e){var a=t("#started-on-fillin").attr("date"),n=t("#finished-on-fillin").attr("date");a=void 0!=a&&a.length>0?U(new Date(a),!0):"1960-01-01",n=void 0!=n&&n.length>0?U(new Date(n),!0):"1d",t("#journal-completion-date-calendar").datepicker({format:"yyyy-mm-dd",minViewMode:0,maxViewMode:2,todayBtn:"linked",autoclose:!0}).on("changeDate",(function(e){t("#journal-completion-date-input").val(U(e.date,!0))})),t("#journal-completion-date-calendar").datepicker("setStartDate",a),t("#journal-completion-date-calendar").datepicker("setEndDate",n);var i=t(this).attr("date");i&&(i=U(new Date(i),!0));var s=U(new Date,!0);t("#journal-completion-date-calendar").datepicker("update",i||s),t("#journal-completion-date-input").val(i||s),t("#journal-completion-date-input").attr("min",a),t("#journal-completion-date-input").attr("max","1d"==n?s:n),t("#journal-completion-date-modal").attr("field",t(this).attr("id")),o.default.show("journal-completion-date-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0})}else w.gotoDate(e.start),t("#year-selector").selectpicker("val",e.start.getFullYear()),t("#month-selector").selectpicker("val",e.start.getMonth()),R(e),$()}))})),u()("#month-selector, #year-selector",(function(){t(this).on("changed.bs.select",(function(e,a,n,o){"changed"==e.type&&w.gotoDate(new Date(t("#year-selector").val(),t("#month-selector").val()))}))})),t(document).on("turbolinks:load",(function(){t(".modal-content").on("show.bs.modal",".datepicker, .datepicker-quick, #journal-completion-date-calendar",(function(t){t.stopPropagation()})),t(document).on("show.bs.modal",".modal",(function(){var e=1040+10*t(".modal:visible").length;t(this).css("z-index",e),setTimeout((function(){t(".modal-backdrop").not(".modal-stack").css("z-index",e-1).addClass("modal-stack")}),0)}))}))}.call(this,a(7))},189:function(t,e,a){(function(t){var e=150;onmount("#list_game_search",(function(){t(this).autocomplete({minChars:2,triggerSelectOnValidInput:!1,autoSelectFirst:!0,noCache:!1,preventBadQueries:!1,deferRequestBy:e,serviceUrl:"/autocomplete.json",dataType:"json",onSelect:function(e){if(e&&e.data&&e.data.slug){var a=e.data.id,n=t(".list-form")[0].id,o=t("#list_style")[0].checked;t.ajax({type:"POST",url:"/api/list/"+n+"/"+a,data:{grid_mode:o}}),t("#list_game_search").val(null)}},formatResult:function(t,e){return t.value+" ("+t.data.year+")"}})})),onmount("#favorite-game-search",(function(){t(this).autocomplete({minChars:2,triggerSelectOnValidInput:!1,autoSelectFirst:!0,noCache:!1,preventBadQueries:!1,deferRequestBy:e,serviceUrl:"/autocomplete.json",dataType:"json",onSelect:function(e){if(e&&e.data&&e.data.slug){var a=e.data.id;t.ajax({type:"POST",url:"/add-favorite/"+a+"/"}),t("#add-a-favorite-modal").modal("hide"),t("#favorite-game-search").val(null)}},formatResult:function(t,e){return t.value+" ("+t.data.year+")"}})})),onmount("#modal-game-search",(function(){t(this).autocomplete({minChars:2,triggerSelectOnValidInput:!1,autoSelectFirst:!0,noCache:!1,preventBadQueries:!1,deferRequestBy:e,serviceUrl:"/autocomplete.json",dataType:"json",onSelect:function(e){if(e&&e.data&&e.data.slug){var a=e.data.id;openLogModal(a),t("#add-a-game-modal").modal("hide"),t("#modal-game-search").val(null)}},formatResult:function(t,e){return t.value+" ("+t.data.year+")"}})})),onmount("#nav-bar-search",(function(){t(this).autocomplete({minChars:2,triggerSelectOnValidInput:!1,autoSelectFirst:!1,noCache:!1,preventBadQueries:!1,deferRequestBy:e,serviceUrl:"/autocomplete.json",dataType:"json",onSelect:function(t){t&&t.data&&t.data.slug&&Turbolinks.visit("/games/"+t.data.slug+"/")},formatResult:function(t,e){return t.value+" ("+t.data.year+")"}})})),onmount("#goty-search",(function(){t(this).autocomplete({minChars:2,triggerSelectOnValidInput:!1,autoSelectFirst:!0,noCache:!1,preventBadQueries:!1,deferRequestBy:e,serviceUrl:"/autocomplete/2020.json",dataType:"json",onSelect:function(e){if(e&&e.data&&e.data.slug){var a=e.data.id,n=t("#add-a-goty-modal")[0].getAttribute("category");t.ajax({type:"POST",url:"/add-goty-entry/"+a+"/"+n}),t("#add-a-goty-modal").modal("hide")}},formatResult:function(t,e){return t.value+" ("+t.data.year+")"}})}))}).call(this,a(7))},190:function(t,e,a){"use strict";a.r(e),function(t){var e=a(10),n=a(1),o=a.n(n),i=a(10).default;o()(".journal-quick-icons .play-session-note",(function(){var a=t(this).next()[0];i(t(this)[0],{animateFill:!0,allowHTML:!0,placement:"top",plugins:[e.animateFill],theme:"backloggd",content:a.innerHTML,popperOptions:{strategy:"fixed",modifiers:[{name:"flip",enabled:!1}]}})})),o()(".card.game-cover.user-rating",(function(){var e=t("#tippy-ratings-display");i(t(this)[0],{content:t(e).html(),allowHTML:!0,placement:"top",offset:[0,-13],theme:"backloggd-rating",arrow:!1,onShow:function(e){var a=t(e.reference).attr("data-rating");e.setContent(e.props.content.replace("width:0%","width:"+10*a+"%"))},popperOptions:{strategy:"fixed",modifiers:[{name:"flip",enabled:!1}]}})})),o()(".mastered-icon-tooltip",(function(){i(t(this)[0],{content:"Mastered",animateFill:!0,plugins:[e.animateFill],offset:[0,5],placement:"top",theme:"backloggd",allowHTML:!0,popperOptions:{strategy:"fixed",modifiers:[{name:"flip",enabled:!1}]}})})),o()(".time-tooltip",(function(){i(t(this)[0],{animateFill:!0,plugins:[e.animateFill],offset:[0,5],placement:"top",theme:"backloggd",delay:[400,null],allowHTML:!0,popperOptions:{strategy:"fixed",modifiers:[{name:"flip",enabled:!1}]}})})),o()(".top-tooltip, #friend_plays [data-tippy-content], #log-counters [data-tippy-content], #play-ratings [data-tippy-content], #backlog-ratings [data-tippy-content]",(function(){i(t(this)[0],{animateFill:!0,plugins:[e.animateFill],offset:[0,5],placement:"top",theme:"backloggd",popperOptions:{strategy:"fixed",modifiers:[{name:"flip",enabled:!1}]}})}));var s=3e3;o()(".badge-tooltip",(function(){var e=document.getElementById("badge-"+t(this).attr("badge_id")),a=t(this);i(t(this)[0],{content:e.innerHTML,animation:"scale-subtle",allowHTML:!0,offset:[0,-45],placement:"right",theme:"backloggd-badge",zIndex:s,trigger:"mouseenter click",onTrigger:function(t,e){t.setProps({zIndex:s}),a.css("z-index",s+1),a.css("position","relative"),s+=2},onHidden:function(t,e){a.css("position","static")}})})),o()(".right-tooltip",(function(){i(t(this)[0],{animateFill:!0,plugins:[e.animateFill],offset:[0,5],placement:"right",theme:"backloggd"})})),o()(".helper-tooltip",(function(){i(t(this)[0],{animateFill:!0,plugins:[e.animateFill],offset:[0,5],theme:"backloggd-helper",trigger:"click"})}))}.call(this,a(7))},191:function(t,e,a){"use strict";a.r(e),function(t){var e=a(12),n=a.n(e),o=(a(28),a(4)),i=a(25),s=!0,l=null,r=[{},{},{}];onmount("#quick-access-toggle",(function(){t(this).on("click",(function(){t("#quick-access-widget-bar").addClass("d-none");var e=t(this).attr("user_id");t.ajax({type:"PATCH",url:"/users/"+e,data:{user_settings:{display_quick_access:!1}},success:function(t){n.a.success("Widgets hidden, update preference in your profile settings")}})}))})),onmount("#widget-editor-toggle",(function(){t(this).on("click",(function(){MicroModal.show("widget-edit-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0,disableScroll:!0,onClose:function(){t("#widget-selector, #widget-preview").addClass("d-none"),t("#quick-access-viewer").removeClass("d-none")}})}))})),onmount("#widget-editor-close",(function(){t(this).on("click",(function(){MicroModal.close("widget-edit-modal")}))})),onmount(".widget-slot-edit",(function(){t(this).on("click",(function(){var e=t(this).attr("widget_type");t("#widget-selector").removeClass("d-none"),t("#widget-preview").addClass("d-none"),t("#quick-access-viewer").addClass("d-none"),t("#widget-edit-modal .widget-option").removeClass("current"),t('#widget-edit-modal .widget-option[widget_type="'+e+'"]').addClass("current"),t("#widget-use").attr("slot_num",t(this).attr("slot"))}))})),onmount("#widget-selector .widget-option",(function(){t(this).on("click",(function(){var e=t(".widget-preview img",this).attr("src"),a=t(".quick-access-widget-title .title-text",this).text(),n=t(".quick-access-widget-desc",this).text(),o="true"==t(this).attr("is_premium"),i="true"==t(this).attr("has_premium");if(t("#widget-use").attr("widget_type",t(this).attr("widget_type")),t("#widget-preview img").attr("src",e),t("#selected-widget-title, #widget-preview .quick-access-widget-title").text(a),t("#selected-widget-desc").text(n+"."),t("#widget-selector").addClass("d-none"),t("#widget-preview").removeClass("d-none"),"true"==t(this).attr("is_customizable")){var s=t("#widget-customization-section #options-container");t.ajax({type:"GET",url:"/widget/settings/render/",data:{widget_type:t(this).attr("widget_type"),widget_slot:t("#widget-use").attr("slot_num")},success:function(e){s.html(e),i||s.append('<div id="widget-premium-wall"></div>');var a=r[t("#widget-use").attr("slot_num")][t(this).attr("widget_type")];a&&a.each((function(){var e=t("#options-container #"+t(this).id).prop("type");"checkbox"==e||"radio"==e?t("#options-container #"+t(this).id).prop("checked",t(this).val):"button"!=e&&"submit"!=e&&t("#options-container #"+t(this).id).val(t(this).val)})),onmount()}}),t("#widget-customization-section").removeClass("d-none")}else t("#widget-customization-section #options-container").html(""),t("#widget-customization-section").addClass("d-none");t("#widget-use").prop("disabled",o&&!i)}))})),onmount(".widget-go-back",(function(){t(this).on("click",(function(){t("#widget-selector").hasClass("d-none")?(t("#widget-selector").removeClass("d-none"),t("#widget-preview").addClass("d-none"),t("#widget-customization-section #options-container").html("")):(t("#widget-selector").addClass("d-none"),t("#quick-access-viewer").removeClass("d-none"))}))})),onmount("#widget-use",(function(){t(this).on("click",(function(){t('.widget-slot-edit[slot="'+t(this).attr("slot_num")+'"]').attr("widget_type",t(this).attr("widget_type")),t('.widget-slot-edit[slot="'+t(this).attr("slot_num")+'"] .widget-slot-edit-title').text(t("#widget-preview .quick-access-widget-title").text());var e=t(this).attr("widget_type"),a=t(this).attr("slot_num"),n=t("#options-container :input").map((function(){var e=t(this).prop("type");return"checkbox"==e||"radio"==e?{id:t(this).attr("id"),val:this.checked}:"button"!=e&&"submit"!=e?{id:t(this).attr("id"),val:t(this).val()}:void 0})).get();t("#widget-selector").addClass("d-none"),t("#widget-preview").addClass("d-none"),t("#quick-access-viewer").removeClass("d-none"),t.ajax({type:"POST",url:"/widget/set/",data:{widget_options:n,widget_type:e,slot_num:a},success:function(e){t("#widget-"+a+" .quick-access-widget-title").text(t("#widget-preview .quick-access-widget-title").text()),t.ajax({type:"GET",url:"/widget/render/",data:{slot_num:a},success:function(e){t("#widget-"+a+" .quick-access-container .col").html(e)}})}})}))})),onmount("#widget-list-selector",(function(){t(this).on("click",(function(){t.ajax({type:"GET",url:"/render/user_lists",data:{game_id:t(this).attr("game_id"),single_mode:!0},success:function(e){t("#widget-list-modal #list-container").html(e),MicroModal.show("widget-list-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0,disableScroll:!0})}})}))})),onmount("#widget-list-modal .list-entry",(function(){t(this).on("click",(function(){MicroModal.close("widget-list-modal"),t("#options-container #widget-list-id").val(t(this).attr("list_id")),t("#options-container #widget-list-selector #list-title").text(t(".list-entry-title",this).text())}))})),onmount(".draggable-list#edit-favorite-games",(function(){null!=l&&l.destroy(),(l=new i.Sortable(document.querySelectorAll("#edit-favorite-games"),{draggable:".draggable-list-entry",handle:".list-entry-handle",swapAnimation:{duration:150,easingFunction:"ease-in-out",horizontal:!0},plugins:[i.Plugins.SwapAnimation]})).on("sortable:sort",(function(){s&&(t(".draggable-mirror").width(t(".draggable-list-entry .grid-mode").width()),s=!1),console.log("Sorting lists...")})),l.on("sortable:stop",(function(e){s=!0,moveElement(t(e.newContainer).children(".draggable-list-entry"),curr_entry,e.oldIndex,e.newIndex),curr_entry=null})),l.on("sortable:start",(function(e){curr_entry=t(e.startContainer).children(".draggable-list-entry").get(e.startIndex).getAttribute("entry_id")}))})),onmount("#add-favorite-game",(function(){t(this).on("click",(function(){t("#add-a-favorite-modal").modal("show")}))})),onmount(".delete-favorite-entry",(function(){t(this).on("click",(function(){t(this).parent().parent().parent().parent().parent().remove(),t("#edit-favorite-games .draggable-list-entry").length<5&&t("#edit-favorite-games #add-favorite-card").removeClass("d-none")}))})),onmount(".set-favorite-crown-entry",(function(){t(this).on("click",(function(){var e=t(this).parent().parent().parent().parent().parent(),a=e.attr("crown");t(".draggable-list-entry").removeClass("crowned"),t(".draggable-list-entry").attr("crown",!1),"false"==a?(e.addClass("crowned"),e.attr("crown",!0)):(e.removeClass("crowned"),e.attr("crown",!1))}))})),onmount("#register-new-user-btn",(function(){t(this).on("click",(function(){t(this).prop("disabled",!0),Object(o.g)(t(this)),t("form#new_user").submit()}))})),onmount("#set-all-journal-privacy",(function(){t(this).on("click",(function(){var e=t("button[data-id='reset_note_privacy']").attr("title"),a=t("#reset_note_privacy").val();Object(o.b)("Set all play session note privacy settings to: '"+e+"'",(function(){}),(function(){t.ajax({type:"POST",url:"/logs/sessions/privacy",data:{new_privacy:a},success:function(t){n.a.success("Privacy settings successfully updated")}})}),"Discard","Confirm")}))})),onmount("#remove-all-tags",(function(){t(this).on("click",(function(){Object(o.b)("Remove all tags from every journal play session?",(function(){}),(function(){t.ajax({type:"DELETE",url:"/user/tags/destroy",success:function(t){n.a.success("Tags successfully deleted")}})}),"Discard","Delete All")}))})),onmount("#delete-account",(function(){t(this).on("click",(function(){var e=t(this),a=t(this).attr("user_id");e.prop("disabled",!0),Object(o.b)("You will be logged out and all data associated with your account will be permanently deleted from our database. This cannot be undone.",(function(){e.prop("disabled",!1)}),(function(){t.ajax({type:"DELETE",url:"/users/"+a+"/"})}),"Cancel","Delete account")}))})),onmount("#deactivate-account",(function(){t(this).on("click",(function(){var e=t(this);e.prop("disabled",!0),Object(o.b)("You will be logged out and will not be able to log back in without reactivation.",(function(){e.prop("disabled",!1)}),(function(){t.ajax({type:"DELETE",url:"/users"})}),"Cancel","Deactivate")}))})),onmount("#wipe-all-logs",(function(){t(this).on("click",(function(){var e=t(this);e.prop("disabled",!0),Object(o.b)("Are you 100% sure you want all your logs, reviews, journal entries, and library entries permanently deleted?",(function(){e.prop("disabled",!1)}),(function(){t.ajax({type:"DELETE",url:"/user/logs/destroy/",success:function(e){n.a.success("Logs successfully scheduled for deletion"),t("#logs-deletion-info").removeClass("d-none")}})}),"Cancel","Delete my logs")}))})),onmount("#wipe-all-lost-logs",(function(){t(this).on("click",(function(){var e=t(this);e.prop("disabled",!0),Object(o.b)("Are you sure you want all your lost logs with their reviews, journal entries, and library entries permanently deleted?",(function(){e.prop("disabled",!1)}),(function(){t.ajax({type:"DELETE",url:"/user/lost-logs/destroy/",success:function(t){n.a.success("Lost logs successfully scheduled for deletion")}})}),"Cancel","Delete all lost logs")}))})),onmount("#save-profile-btn",(function(){t(this).on("click",(function(){var e=new FormData(t("#profile-settings-forms")[0]),a=t(this).attr("user_id"),o=[],i={};t("#edit-favorite-games.draggable-list .draggable-list-entry").each((function(e){o.push({game_id:t(this).attr("game_id"),crown:t(this).attr("crown")})})),t(".widget-slot-edit").each((function(e){i[t(this).attr("slot")]=t(this).attr("widget_type")})),e.append("favorites",JSON.stringify(o)),e.append("quick_access",JSON.stringify(i)),t.ajax({type:"PATCH",url:"/users/"+a,processData:!1,contentType:!1,data:e,success:function(t){n.a.success("Profile successfully updated")},error:function(t,e,a){var o="Error: ";t.responseJSON?t.responseJSON.forEach((function(t){return o+=t+"\n"})):o+=a,n.a.error(o,"",{positionClass:"toast-top-center"})}})}))}))}.call(this,a(7))},192:function(t,e,a){"use strict";a.r(e),function(t){var e=a(25),n=a(1),o=a.n(n),i=a(28),s=a.n(i),l=a(3),r=a(5),c=a.n(r),d=a(10).default,u=a(91),p=a(99),m=!0,g=null,h=[],f={},v={},y={},b=[],_={},k=null,w=[];function C(a){null!=g&&g.destroy(),(g=new e.Sortable(document.querySelectorAll("#list-grid"),{draggable:".draggable-list-entry",handle:".list-entry-handle",swapAnimation:{duration:150,easingFunction:"ease-in-out",horizontal:a},plugins:[e.Plugins.SwapAnimation]})).on("sortable:sort",(function(){m&&(a?t(".draggable-mirror").width(t(".draggable-list-entry .grid-mode").width()):t(".draggable-mirror").width(t(".draggable-list-entry .detail-mode").width()),m=!1),console.log("Sorting lists...")})),g.on("sortable:stop",(function(e){m=!0,function(e,a,n,o){if(n==o)return;e.get(n),e.get(o);t.isEmptyObject(f)?f={type:"change",entryId:a,old:n,new:o}:(f.new==n?f.new=o:(h.push(f),f={type:"change",entryId:a,old:n,new:o}),f.new==f.old&&(f={}))}(t(e.newContainer).children(".draggable-list-entry"),k,e.oldIndex,e.newIndex),k=null})),g.on("sortable:start",(function(e){k=t(e.startContainer).children(".draggable-list-entry").get(e.startIndex).getAttribute("entry_id")}))}o()("#list-modal #add-to-list-save",(function(){t(this).on("click",(function(){l.default.close("list-modal");var e=t("#list-modal").attr("game_id"),a=[];t("#list-container input.add_list_checkbox:checked").each((function(){a.push(t(this).attr("list_id"))})),t.ajax({type:"POST",url:"/api/list/quick/"+e,data:{list_ids:a}})}))})),o()(".list-form",(function(){t(".list-form :input:not(textarea)").on("keydown",(function(t){return"Enter"!=t.key}))})),o()("#create-debug-list",(function(){t(this).on("click",(function(){var e=prompt("Enter list entry data",""),a=t(".list-form")[0].id;t.ajax({type:"POST",url:"/api/list/"+a+"/debug-new-entries/",data:{new_entries:e},success:function(t){window.location.reload(!1)}})}))})),o()("#move-debug-list",(function(){t(this).on("click",(function(){var e=prompt("Enter list entry data",""),a=t(".list-form")[0].id,n=[],o=e.split(",");0!=e.length&&(o.forEach((function(t){return n.push(t.replace(/\D/g,""))})),t.ajax({type:"PUT",url:"/api/list/"+a+"/update-entries-2/",data:{prev_order:b,new_order:n,new_entries:_,curr_notes:v},success:function(){s.a.fire(t(".list-form")[0],"submit")}}))}))})),o()(".discard-list-changes",(function(){t(this).on("click",(function(){var e=t(".list-form")[0].id;t.ajax({type:"PATCH",url:"/api/list/"+e+"/discard-entries/",success:function(t){window.location.reload(!1)}})}))})),o()("button.create-list",(function(){t(this).on("click",(function(){t.ajax({type:"POST",url:"/api/new-list/"})}))})),o()("#open-folders, #close-folders",(function(){t(this).on("click",(function(){t("#folder-selector").toggleClass("collapsed"),t("#folder-selector").hasClass("collapsed")?(c.a.set("collapsed_folder_view",!0,{sameSite:"strict",expires:365}),w.forEach((function(t){return t.enable()}))):(c.a.remove("collapsed_folder_view"),w.forEach((function(t){return t.disable()})))}))})),o()("#folder-selector",(function(){w=d("#folder-selector .folder-tooltip",{offset:[0,5],animation:"shift-away",placement:"right",theme:"backloggd",duration:150}),c.a.get("collapsed_folder_view")?t("#folder-selector").addClass("collapsed"):(t("#folder-selector").removeClass("collapsed"),w.forEach((function(t){return t.disable()}))),t(this)[0].scrollHeight>t(this)[0].clientHeight&&t("#folder-selector").addClass("scrollbar-padding")})),o()("#create-folder",(function(){t(this).on("click",(function(){var e=[];t('#list-folder-container input[name="folder_list"]:checked').each((function(){e.push(t(this).val())})),t.ajax({type:"POST",url:"/api/list/folder",data:{folder_id:t(this).attr("folder_id"),title:t("#list_folder_name").val(),default_sort:t("#default_folder_sorting").val(),default_sort_dir:t("#default_folder_sorting_dir").val(),list_ids:e},success:function(t){l.default.close("list-folder-modal"),window.location.href=t.slug}})}))})),o()("#default_folder_sorting",(function(){t(this).on("changed.bs.select",(function(e,a,n,o){var i=t('#default_folder_sorting option[value="'+t(this).selectpicker("val")+'"]').attr("default_dir");t("#default_folder_sorting_dir").selectpicker("val","asc"==i?1:0)}))})),o()("#default_list_sorting",(function(){t(this).on("changed.bs.select",(function(e,a,n,o){var i=t('#default_list_sorting option[value="'+t(this).selectpicker("val")+'"]').attr("default_dir");t("#default_list_sorting_dir").selectpicker("val","asc"==i?1:0)}))})),o()("#default_game_sorting",(function(){t(this).on("changed.bs.select",(function(e,a,n,o){var i=t('#default_game_sorting option[value="'+t(this).selectpicker("val")+'"]').attr("default_dir");t("#default_game_sorting_dir").selectpicker("val",i)}))})),o()("#default_backlog_sorting",(function(){t(this).on("changed.bs.select",(function(e,a,n,o){var i=t('#default_backlog_sorting option[value="'+t(this).selectpicker("val")+'"]').attr("default_dir");t("#default_backlog_sorting_dir").selectpicker("val",i)}))})),o()("#default_playing_sorting",(function(){t(this).on("changed.bs.select",(function(e,a,n,o){var i=t('#default_playing_sorting option[value="'+t(this).selectpicker("val")+'"]').attr("default_dir");t("#default_playing_sorting_dir").selectpicker("val",i)}))})),o()("#default_wishlist_sorting",(function(){t(this).on("changed.bs.select",(function(e,a,n,o){var i=t('#default_wishlist_sorting option[value="'+t(this).selectpicker("val")+'"]').attr("default_dir");t("#default_wishlist_sorting_dir").selectpicker("val",i)}))})),o()("#delete-folder",(function(){t(this).on("click",(function(){confirm("Are you sure you want to delete this folder?")&&t.ajax({type:"DELETE",url:"/api/list/folder",data:{folder_id:t(this).attr("folder_id")}})}))})),o()("#edit-list-note-modal #note",(function(){t(this).on("input",(function(){var e=t("#edit-list-note-modal").attr("entry_id");t('.grid-list-entry[entry_id="'+e+'"]').attr("note")!=t(this).val()?t("#edit-list-note-modal #save-note").prop("disabled",!1):t("#edit-list-note-modal #save-note").prop("disabled",!0)}))})),o()("#edit-list-note-modal #save-note",(function(){t("#edit-list-note-modal #save-note").prop("disabled",!0),t(this).on("click",(function(){var e=t("#edit-list-note-modal").attr("entry_id"),a=t("#edit-list-note-modal #note").val();t("#edit-list-note-modal #save-note").prop("disabled",!0),v[e]=a,t('.grid-list-entry[entry_id="'+e+'"]').attr("note",a),l.default.close("edit-list-note-modal")}))})),o()(".delete-entry",(function(){t(this).on("click",(function(){t.isEmptyObject(f)||(h.push(f),f={});var e=t(this).parent().parent().parent().parent().parent(),a=parseInt(e.attr("entry_id"));h.length>0&&"add"==h[h.length-1].type&&h[h.length-1].temp_id==a?h.splice(-1,1):h.push({type:"remove",entry_id:a}),delete _[a],e.remove()}))}));var x=-1;function j(){var e=["list[name]","list[privacy]","list[ranked]","list[style]","list[desc]","default_list_sorting"],a={};return t.each(t(".list-form").serializeArray(),(function(n,o){t.inArray(o.name,e)>-1&&(a[o.name]=o.value)})),a}o()("#list-grid .draggable-list-entry",(function(){t(this).attr("entry_id").length<1&&(t(this).attr("entry_id",x),h.push({type:"add",game_id:t(this).attr("game_id"),temp_id:x}),_[x]=t(this).attr("game_id"),x-=1)})),o()("#list-view",(function(){t(this).on("click",(function(){window.location.replace(t(this).attr("redirect_url"))}))})),o()("#list-submit",(function(){h=[],f={},v={},b=[],_={},y=j(),t(".draggable-list .draggable-list-entry").each((function(e){b.push(t(this).attr("entry_id"))})),t(window).bind("beforeunload",(function(e){if(n=[],o=j(),t(".draggable-list .draggable-list-entry").each((function(e){n.push(t(this).attr("entry_id"))})),!u(v)||!u(_)||!p(b,n)||!p(y,o)){var a="You have unsaved changes.\nAre you sure you want to leave?";return(e||window.event).returnValue=a,a}var n,o})),t(this).on("click",(function(){t(this).prop("disabled",!0),t(this).html("Saving..."),t("#list_game_search").prop("disabled",!0),t.isEmptyObject(f)||h.push(f);var e=[];t(".draggable-list .draggable-list-entry").each((function(a){e.push(t(this).attr("entry_id"))})),t.ajax({type:"PUT",url:"/api/list/"+t(this).attr("list_id")+"/update-entries-2/",data:{prev_order:b,new_order:e,new_entries:_,curr_notes:v},success:function(){s.a.fire(t(".list-form")[0],"submit")}}),t("#list-grid").html('<div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>')}))})),o()(".draggable-list#list-grid",(function(){C(t("#list_style")[0].checked)})),o()("#list_style",(function(){t(this).on("change",(function(){var e=t("#list_style")[0].checked;t(".grid-mode, .detail-mode").toggleClass("d-none"),e?t(".draggable-list-entry").attr("class","col-cus-3 col-md-cus-5 mt-2 px-1 grid-list-entry draggable-list-entry"):t(".draggable-list-entry").attr("class","col-12 mt-2 grid-list-entry draggable-list-entry"),C(e)}))}))}.call(this,a(7))},193:function(t,e,a){"use strict";a.r(e),function(t){var e=a(3),n=a(5),o=a.n(n);function i(t){if(t.hasAttribute("data-close-parent-modal")){var a=t.closest(".micro-modal");a&&e.default.close(a.id)}}onmount("body",(function(){"true"!==o.a.get("hide_update_warning")&&t("#apple-update-data-modal").length&&e.default.show("apple-update-data-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0,onClose:function(){o.a.set("hide_update_warning",!0,{sameSite:"strict",expires:365})}}),t(this).on("mousedown",(function(t){i(t.target)})),t(this).on("touchstart",(function(t){i(t.target)}))})),onmount("#new-folder-btn",(function(){t(this).on("click",(function(){e.default.show("list-folder-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0})}))})),onmount("#edit-folder-btn",(function(){t(this).on("click",(function(){e.default.show("list-folder-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0,disableFocus:!0})}))})),onmount("#add-a-game-modal",(function(){t(this).on("shown.bs.modal",(function(){t("#modal-game-search").focus()}))})),onmount("#add-a-favorite-modal",(function(){t(this).on("shown.bs.modal",(function(){t("#favorite-game-search").focus()}))})),onmount(".list-entry-note-btn",(function(){t(this).on("click",(function(){t("#list-entry-note").html(t(this).next().html()),t("#note-game-name").html(t(this).attr("game_name")),e.default.show("list-note-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0,disableScroll:!0})}))})),onmount(".edit-note",(function(){t(this).on("click",(function(){var a=t(this).parent().parent().parent().parent().parent(),n=a.attr("entry_id"),o=a.attr("note");t("#edit-list-note-modal").attr("entry_id",n),t("#edit-list-note-modal #note").val(o),e.default.show("edit-list-note-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0})}))})),onmount(".open-log-field",(function(){t(this).on("click",(function(){e.default.show("dup-field-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0}),t(".open-log-field").attr("type",t(this).attr("type")),t(".open-log-field").attr("old_id",t(this).attr("log-id"))}))})),onmount(".submit-log-id-change",(function(){t(this).on("click",(function(){t.ajax({type:"PATCH",url:"/logs/transfer",data:{type:t(".open-log-field").attr("type"),new_id:t("#log-id-transfer").val(),old_id:t(".open-log-field").attr("old_id")},success:function(t){e.default.close("dup-field-modal")}})}))})),onmount("#dup-field-modal",(function(){e.default.init()})),onmount("#edit-folders-btn",(function(){t(this).on("click",(function(){e.default.show("folder-list-selector-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0,onShow:function(){t("body").addClass("modal-open"),t("body").css("padding-right","17px")},onClose:function(){var e=t('#folder-list-selector-modal input[name="folder_list[]"]:checked').length;t("#edit-folders-btn #folder-count").html(e+" Folder"+(1!=e?"s":"")),t("body").removeClass("modal-open"),t("body").css("padding-right","")}})}))})),onmount("#list-folder-selector-save",(function(){t(this).on("click",(function(){e.default.close("list-folder-selector-modal");var a=[];t('#list-folder-selector-modal input[name="folder_list"]:checked').each((function(){a.push(t(this).val())})),t.ajax({type:"PUT",url:"/api/list/folder/lists/",data:{list_ids:a,folder_id:t("#list-folder-selector-modal").attr("folder_id")}})}))})),window.onmount("#add-to-list, .quick-list",(function(){t(this).on("click",(function(){t("#list-modal").attr("game_id",t(this).attr("game_id")),t.ajax({type:"GET",url:"/render/user_lists",data:{game_id:t(this).attr("game_id")},success:function(a){t("#list-modal #list-container").html(a),e.default.show("list-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0,onShow:function(){t("body").addClass("modal-open"),t("body").css("padding-right","17px")},onClose:function(){t("body").removeClass("modal-open"),t("body").css("padding-right","")}})}})}))}))}.call(this,a(7))},194:function(t,e,a){"use strict";a.r(e),function(t){a(25),a(3);var e,n,o=a(5),i=a.n(o),s=a(4);function l(e){var a="",n={};return t.each(e,(function(e,a){if(0!=a.value.length){var o=a.name.substring("filters[".length,a.name.length),i=o.search("]");if(0!=(o=o.substring(0,i).toLowerCase()).length){var s=t('input[name="'+a.name+'"][value="'+a.value+'"]').attr("default");"undefined"!==typeof s&&!1!==s||(o in n?n[o].push(a.value.toLowerCase()):n[o]=[a.value.toLowerCase()])}}})),t.each(n,(function(t,e){a+=t+":"+e.join(",")+";"})),a.slice(0,-1)}function r(t){t.value.length>0?t.style="background-color: var(--back-field-highlight);":t.style=""}onmount(".filter-toggable-checkbox",(function(){var e="gl_filter_"+t(this).attr("id");t(this).prop("checked",i.a.get(e)),t(this).on("change",(function(){t(this).is(":checked")?i.a.set(e,t(this).is(":checked"),{sameSite:"strict",expires:365}):i.a.remove(e),window.location.reload(!1)}))})),onmount("#no_platforms_logged",(function(){t(this).on("change",(function(){t("#plat-played-on").prop("disabled",t(this).is(":checked")),t("#plat-played-on").selectpicker("refresh")}))})),onmount("#dismiss, .sidebar-overlay",(function(){t(this).on("click",(function(){Object(s.f)()}))})),onmount("#sidebarCollapse",(function(){t(this).on("click",(function(){t("#filter-sidebar").addClass("active"),t(".sidebar-overlay").addClass("active"),t("body").addClass("noScroll"),t(".collapse.in").toggleClass("in"),t("a[aria-expanded=true]").attr("aria-expanded","false")}))})),onmount("#folderSidebarCollapse",(function(){t(this).on("click",(function(){t("#folder-sidebar").addClass("active"),t(".sidebar-overlay").addClass("active"),t("body").addClass("noScroll"),t(".collapse.in").toggleClass("in"),t("a[aria-expanded=true]").attr("aria-expanded","false")}))})),onmount("#settingsSidebarCollapse",(function(){t(this).on("click",(function(){t("#settings-sidebar").addClass("active"),t(".sidebar-overlay").addClass("active"),t("body").addClass("noScroll"),t(".collapse.in").toggleClass("in"),t("a[aria-expanded=true]").attr("aria-expanded","false")}))})),onmount("#filters-submit",(function(){t(this).on("click",(function(){var e,a=l(t("#filter_form").serializeArray()),n=t(this).attr("org_url_sort");e=n.endsWith("/")?n:n+"/",window.location.href=e+a+(a.length>0?"/":"")}))})),onmount("#new-collection",(function(){t(this).on("click",(function(){t.ajax({type:"POST",url:"/new-collection/",data:{filters_url:l(t("#filter_form").serializeArray())}})}))})),onmount("#mastered-filter-options input",(function(){t(this).on("click",(function(){var e=t(this);"true"==e.attr("waschecked")?(e.prop("checked",!1),e.attr("waschecked",!1)):e.attr("waschecked",!0),e.siblings("input").attr("waschecked",!1)}))})),onmount('input[name="filters[release_year]"]',(function(){t(this).on("click",(function(){if(e===this){this.checked=!1,e=null;var a=t('input[name="filters[release_year_custom]"]')[0];a.value.length>0&&(a.style="border-color: var(--back-pink-dk);")}else e=this,t('input[name="filters[release_year_custom]"]')[0].style=""}))})),onmount('input[name="filters[release_year_custom]"]',(function(){t(this).on("click",(function(){t('input[name="filters[release_year]"]').prop("checked",!1)})),t(this).on("focusout",(function(){r(this)})),t(this).on("change",(function(){r(this)}))})),t(document).on("turbolinks:load",(function(){t('input[name="filters[played_year]"]').click((function(){if(n===this){this.checked=!1,n=null;var e=t('input[name="filters[played_year_custom]"]')[0];e.value.length>0&&(e.style="border-color: var(--back-pink-dk);")}else n=this,t('input[name="filters[played_year_custom]"]')[0].style=""})),t('input[name="filters[played_year_custom]"]').click((function(){t('input[name="filters[played_year]"]').prop("checked",!1)})),t('input[name="filters[played_year_custom]"]').focusout((function(){r(this)})),t('input[name="filters[played_year_custom]"]').change((function(){r(this)}))}))}.call(this,a(7))},195:function(t,e,a){(function(t){onmount(".friend-btn.follow",(function(){t(this).on("click",(function(){t.ajax({type:"POST",url:"/follow/",data:{user_id:t(this).attr("user_id")}})}))})),onmount(".friend-btn.unfollow-btn",(function(){t(this).on("click",(function(){t.ajax({type:"DELETE",url:"/unfollow/",data:{user_id:t(this).attr("user_id")}})}))}))}).call(this,a(7))},196:function(t,e,a){(function(t){var e=a(61);function n(a){t("#list-progress").html("");var n=new e.Circle("#list-progress",{color:"#ea377a",trailColor:"#8890ad8c",strokeWidth:4,trailWidth:2,duration:1500,easing:"easeOut",text:{value:Math.floor(100*parseFloat(a))+"%",className:"list-progress-label"}});t("#list-progress-circle").hasClass("d-none")||(n.set(0),n.animate(a))}onmount("#stats-switcher",(function(){t(this).on("click",(function(){var e=t(this).attr("user_id"),a=t(this).attr("curr_user_id"),o=t(this).attr("list_id");t.ajax({type:"PUT",url:"/api/list/stats/",data:{user_id:e,list_id:o},success:function(e){n(e.progress),t("#list-progress-avg-rating #avg-rating").html(e.avg_played_rating)}}),t(this).html("See your stats"),t(this).attr("user_id",a),t(this).attr("curr_user_id",e)}))})),onmount("#list-progress-circle",(function(){n(t("#list-progress").attr("progress"))}));var o=[];onmount(".list-progress-expand",(function(){t(this).on("click",(function(){t("#list-progress-extra").hasClass("d-none")&&t.each(o,(function(t,e){e.bar.set(0),e.bar.animate(e.progress)})),t(".list-progress-expand i").toggleClass("rotated"),t("#list-progress-extra").toggleClass("d-none"),t(".card.game-cover .status-overlay").toggleClass("d-none"),t(".note-with-status").toggleClass("shift-down")}))})),onmount(".list-progress-type",(function(){t(this).html("");var a=new e.Line(".list-progress-type#"+t(this).attr("id"),{color:t(this).attr("color"),trailColor:"#8890ad8c",strokeWidth:2,trailWidth:2,duration:750,easing:"easeOut"});o.push({bar:a,progress:t(this).attr("progress")})})),onmount("#list-progress-mastered",(function(){t("#list-progress-mastered").html("");var a=new e.Line("#list-progress-mastered",{color:"#43b94f",trailColor:"#8890ad8c",strokeWidth:2,trailWidth:2,duration:1500,easing:"easeOut"});a.set(0),a.animate(t("#list-progress-mastered").attr("progress"))}))}).call(this,a(7))},197:function(t,e,a){"use strict";a.r(e),function(t){var e=a(3);onmount("#removed-review-submit",(function(){t(this).on("click",(function(){var e=t("#removed_review_body").val(),a=t(this).attr("review_id");t(this).prop("disabled",!0),t.ajax({type:"PUT",url:"/appeal/review/"+a+"/edit/",data:{body:e},success:function(e){toastr.success("Review submitted"),t.ajax({type:"POST",url:"/comment/appeal/new/"+a,data:{comment_body:"Review edits submitted",from_mod:!1},success:function(t){window.location.reload()}})},error:function(t,e,a){toastr.success("Error submitting review edits: "+a)}})}))})),onmount(".report-btn",(function(){t(this).on("click",(function(){e.default.show("report-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0})}))})),onmount(".close-report-modal",(function(){t(this).on("click",(function(){e.default.close("report-modal")}))})),onmount(".report-nav",(function(){t(this).on("click",(function(){t(".report-nav").removeClass("filled"),t(this).addClass("filled"),"block"==t(this).attr("id")?(t(".report-desc").addClass("d-none"),t(".block-desc").removeClass("d-none")):"report"==t(this).attr("id")&&(t(".report-desc").removeClass("d-none"),t(".block-desc").addClass("d-none"))}))})),onmount(".report-open",(function(){t(this).on("click",(function(){var a=t(this).attr("report_id");t.ajax({type:"GET",url:"/report/open-modal/"+a,success:function(a){t("#report-case-modal .modal__container").html(a),onmount(),e.default.show("report-case-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0,debugMode:!0})}})}))})),onmount(".selectpicker.report-status-picker",(function(){t(this).on("changed.bs.select",(function(e,a,n,o){var i=t(this).attr("report_id");t.ajax({type:"PATCH",url:"/report/status/"+i,data:{status:t(this).val()},success:function(t){toastr.success("Report updated")}})}))})),onmount(".report-btn",(function(){t(this).on("click",(function(){var e=t(this).attr("model_type"),a=t(this).attr("model_id"),n=t(this).attr("user_id");t("#submit-report-btn").attr("model_type",e).attr("model_id",a),t("#block-btn").attr("user_id",n);"game"==e?t("#report-modal #block").addClass("d-none"):t("#report-modal #block").removeClass("d-none"),t("#report-modal #report_reasoning").html(""),t.each({game:["Duplicate","Missing / Invalid Data"],review:["Abuse / Harassment","Unmarked Spoiler","Spam","Other"],comment:["Abuse / Harassment","Spam","Other"],user:["Abuse / Harassment","Offensive Username","Spam","Other"],list:["Abuse / Harassment","Spam","Other"]}[e],(function(e,a){t("#report-modal #report_reasoning").append("<option>"+a+"</option>")})),t("#report_reasoning").selectpicker("refresh")}))})),onmount("#report_reasoning",(function(){t(this).on("changed.bs.select",(function(e,a,n,o){var i=t(".report-btn").attr("model_type");n?t("#submit-report-btn").prop("disabled",!1):t("#submit-report-btn").prop("disabled",!0),"game"==i&&2==a?(t("#report_body, #submit-report-btn").addClass("d-none"),t("#report-invalid-game-info").removeClass("d-none")):(t("#report_body, #submit-report-btn").removeClass("d-none"),t("#report-invalid-game-info").addClass("d-none"))}))})),onmount("#unblock-btn",(function(){t(this).on("click",(function(){var e=t(this).attr("user_id");t.ajax({type:"DELETE",url:"/unblock/"+e,success:function(t){location.reload()}})}))})),onmount("#block-btn",(function(){t(this).on("click",(function(){var a=t(this).attr("user_id");t.ajax({type:"POST",url:"/block/",data:{user_id:a},success:function(t){location.reload()}}),e.default.close("report-modal")}))})),onmount("#submit-report-btn",(function(){t(this).on("click",(function(){var a=t(this).attr("model_type"),n=t(this).attr("model_id"),o=t("#report-modal #report_reasoning").val(),i=t("#report-modal #report_body").val();t("#submit-report-btn").prop("disabled",!0),t.ajax({type:"POST",url:"/report/",data:{model_type:a,model_id:n,reason:o,desc:i},success:function(e){toastr.success("Report has been received"),t("#report-modal #report_body").val("")}}),e.default.close("report-modal")}))}))}.call(this,a(7))},198:function(t,e,a){"use strict";a.r(e),function(t){var e=a(4);function n(){return!!(t("#restriction_reason").val()&&t("#restriction-picker").val()&&t("#restriction-time-picker").val())}onmount("#admin-api-refresh",(function(){t(this).on("click",(function(){var e=t(this).attr("game_id");t.ajax({type:"POST",url:"/games-refresh/"+e,success:function(t){window.location.reload()}})}))})),onmount("#editing-unlock",(function(){t(this).on("click",(function(){var e=t(this).attr("review_id");t(this).prop("disabled",!0),t.ajax({type:"PUT",url:"/appeal/review/"+e+"/allow_edit/",data:{allow:!0},success:function(t){toastr.success("Editing has been unlocked"),window.location.reload()}})}))})),onmount("#editing-lock",(function(){t(this).on("click",(function(){var e=t(this).attr("review_id");t(this).prop("disabled",!0),t.ajax({type:"PUT",url:"/appeal/review/"+e+"/allow_edit/",data:{allow:!1},success:function(t){toastr.success("Editing has been locked"),window.location.reload()}})}))})),onmount("#appeal-unlock",(function(){t(this).on("click",(function(){var e=t(this).attr("review_id");t(this).prop("disabled",!0),t.ajax({type:"PUT",url:"/appeal/review/"+e+"/open/",success:function(t){toastr.success("Appeals have been unlocked"),window.location.reload()}})}))})),onmount("#appeal-lock",(function(){t(this).on("click",(function(){var e=t(this).attr("review_id");t(this).prop("disabled",!0),t.ajax({type:"PUT",url:"/appeal/review/"+e+"/close/",success:function(t){toastr.success("Appeals have been locked"),window.location.reload()}})}))})),onmount("#admin-disconnect-patron",(function(){t(this).on("click",(function(){var a=t(this).attr("user_id"),n=t(this);n.prop("disabled",!0),Object(e.a)("Are you sure you want to disconnect this user's Patreon account?",(function(){n.prop("disabled",!1)}),(function(){t.ajax({type:"DELETE",url:"/users/"+a+"/patreon",success:function(t){toastr.success("User patron association removed")},error:function(t,e,a){toastr.success("Error removing user patron association: "+a)}})}),"Cancel","Remove")}))})),onmount("#remove-backlog-status",(function(){t(this).on("click",(function(){var a=t(this).attr("user_id"),n=t(this);n.prop("disabled",!0),Object(e.a)("Are you sure you want to remove the backlog status for every log this user has?",(function(){n.prop("disabled",!1)}),(function(){t.ajax({type:"DELETE",url:"/users/"+a+"/logs/backlog",success:function(t){toastr.success("User backlog statuses removed")},error:function(t,e,a){toastr.success("Error removing user backlog statuses: "+a)}})}),"Cancel","Remove")}))})),onmount("#remove-review-likes",(function(){t(this).on("click",(function(){var a=t(this).attr("user_id"),n=t(this);n.prop("disabled",!0),Object(e.a)("Are you sure you want to delete every review like given by this user?",(function(){n.prop("disabled",!1)}),(function(){t.ajax({type:"DELETE",url:"/users/"+a+"/review/likes",success:function(t){toastr.success("User review likes removed")},error:function(t,e,a){toastr.success("Error removing user review likes: "+a)}})}),"Cancel","Destroy")}))})),onmount("#admin-destroy-user",(function(){t(this).on("click",(function(){var a=t(this).attr("user_id"),n=t(this);n.prop("disabled",!0),Object(e.a)("Are you sure you want to delete this user and all their data?",(function(){n.prop("disabled",!1)}),(function(){t.ajax({type:"DELETE",url:"/users/"+a,success:function(t){toastr.success("User scheduled for removal")},error:function(t,e,a){toastr.success("Error scheduling delete user job: "+a)}})}),"Cancel","Destroy")}))})),onmount("#admin-delete-list",(function(){t(this).on("click",(function(){var a=t(this).attr("list_id");Object(e.a)("Are you sure you want to delete this list? This cannot be undone.",(function(){}),(function(){t.ajax({type:"DELETE",url:"/api/list/"+a,success:function(t){toastr.success("List ID: "+a+" removed")},error:function(t,e,a){toastr.success("Error deleted list: "+a)}})}),"Cancel","Destroy")}))})),onmount("#unset-user-restriction",(function(){t(this).on("click",(function(){t.ajax({type:"PATCH",url:"/admin/user/"+t(this).attr("user_id"),data:{length_hours:-1,restriction:null,reason:""}})}))})),onmount("#set-user-restriction",(function(){t(this).on("click",(function(){if(n()){var e=t("#restriction-time-picker").val()[0],a=t("#restriction-picker").val()[0],o=t("#restriction_reason").val();t.ajax({type:"PATCH",url:"/admin/user/"+t(this).attr("user_id"),data:{length_hours:e,restriction:a,reason:o}}),t("#set-user-restriction").prop("disabled",!0)}}))})),onmount("#restriction-time-picker",(function(){t(this).on("changed.bs.select",(function(e,a,o,i){n()?t("#set-user-restriction").prop("disabled",!1):t("#set-user-restriction").prop("disabled",!0)}))})),onmount("#restriction-picker",(function(){t(this).on("changed.bs.select",(function(e,a,o,i){n()?t("#set-user-restriction").prop("disabled",!1):t("#set-user-restriction").prop("disabled",!0)}))})),onmount("#restriction_reason",(function(){t(this).on("input",(function(){n()?t("#set-user-restriction").prop("disabled",!1):t("#set-user-restriction").prop("disabled",!0)}))})),onmount("#restriction-tooltip",(function(){t(t(this)[0]).popover({content:"<u><b>Restrictions</b></u><br><b>nocomments</b> - User can't create new comments<br><br><b>noreviews</b> - User can't create new comments or reviews<br><br><b>noratings</b> - User's ratings aren't counted (but still show up)<br><br><b>shadow</b> - User can't comment, review, or have ratings counted<br><br><b>banned</b> - User can't sign into site, ratings aren't counted or shown publicly, comments are shown as removed, and lists don't show on lists page",offset:"40.75%p",trigger:"focus",html:!0}),t(this).on("click",(function(){t(this).popover("toggle")}))})),onmount("#admin-award-badge",(function(){t(this).on("click",(function(){var e=t("#award-badge-field").val(),a=t(this).attr("user_id");t.ajax({type:"PUT",url:"/api/user/"+a+"/badge/"+e,success:function(t){toastr.success("Badge successfully awarded")},error:function(t,e,a){toastr.success("Error awarding badge: "+a)}})}))})),onmount("#admin-user-nav .btn-link",(function(){t(this).on("click",(function(){t("#admin-user-nav .btn-link").removeClass("active"),t(this).addClass("active"),t(".admin-user-nav-container").addClass("d-none");var e=t(this).attr("container");t("#"+e).removeClass("d-none")}))})),onmount("#remove-avatar",(function(){var e=t(this).attr("user_id");t(this).on("click",(function(){t.ajax({type:"DELETE",url:"/users/"+e+"/avatar/",success:function(t){toastr.success("User avatar destroyed")},error:function(t,e,a){toastr.success("Error destroying user avatar: "+a)}})}))})),onmount("#reset-username",(function(){t(this).on("click",(function(){var e=t(this).attr("user_id");t.ajax({type:"DELETE",url:"/users/"+e+"/username/",success:function(t){toastr.success("Username reset")},error:function(t,e,a){toastr.success("Error resetting username: "+a)}})}))})),onmount("#reset-bio",(function(){t(this).on("click",(function(){var e=t(this).attr("user_id");t.ajax({type:"DELETE",url:"/users/"+e+"/bio/",success:function(t){toastr.success("Bio removed")},error:function(t,e,a){toastr.success("Error removing bio: "+a)}})}))})),onmount("#reset-username-change",(function(){t(this).on("click",(function(){t(this).val();var e=t(this).attr("user_id");t.ajax({type:"PATCH",url:"/users/"+e,data:{username_changed_at:null},success:function(t){toastr.success("Username timer reset")},error:function(t,e,a){toastr.success("Error resetting username timer: "+a)}})}))}));var o=!0;onmount("#role-picker",(function(){t(this).on("changed.bs.select",(function(a,n,i,s){var l=t(this).val(),r=t(this).attr("user_id");o&&Object(e.a)("Are you sure you want to change this user's role?",(function(){o=!1,t("#role-picker").selectpicker("val",s)}),(function(){t.ajax({type:"PATCH",url:"/users/"+r,data:{role:l},success:function(t){toastr.success("User role updated to "+l)},error:function(t,e,a){toastr.success("Error updating role: "+a)}})})),o=!0}))})),onmount("#perk-status-picker",(function(){t(this).on("changed.bs.select",(function(e,a,n,o){var i=t(this).val(),s=t(this).attr("user_id");Array.isArray(i)&&(i=i[0]),void 0===i&&(i=null),t.ajax({type:"PATCH",url:"/users/"+s,data:{perk_status:i},success:function(t){toastr.success("User perks updated to "+i)},error:function(t,e,a){toastr.success("Error updating perks: "+a)}})}))})),onmount(".spam-ip-address",(function(){t(this).on("click",(function(){var e=t(this).attr("ip_address");t("#ip-spam-input-field").val(e),t.ajax({type:"GET",url:"/admin/load-spam-suspects/",data:{query:e}})}))})),onmount("#bulk-ban-spam-users",(function(){t(this).on("click",(function(){var e=t("#ip-spam-input-field").val();t.ajax({type:"DELETE",url:"/admin/ip-spam-destroy/",data:{query:e}})}))})),onmount("#bulk-ban-all-users",(function(){t(this).on("click",(function(){var e=t("#ip-spam-input-field").val();t.ajax({type:"DELETE",url:"/admin/ip-spam-destroy/",data:{query:e,skip_spam_check:!0}})}))})),onmount("#maintenance-submit",(function(){t(this).on("click",(function(){var e=t("#maintenance-input-field").val();t.ajax({type:"PUT",url:"/admin/maintenance-warning/",data:{text:e}})}))})),onmount("#clear-cache-submit",(function(){t(this).on("click",(function(){var e=t("#clear-cache-input-field").val();t.ajax({type:"DELETE",url:"/admin/clear-cache/",data:{cache_key:e}})}))})),onmount("#transfer-game-logs",(function(){t(this).on("click",(function(){t.ajax({type:"PATCH",url:"/games/"+t(this).attr("game_id")+"/transfer/"+t("#new_game_id").val()})}))})),onmount(".quick-remove-review",(function(){t(this).on("click",(function(){var a=t(this).attr("review_id"),n=t(this);a&&(t.ajax({type:"DELETE",url:"/admin/review/remove/"+a,data:{message:"Violates Terms of Service",refresh_page:!1},success:function(t){n.html("Removed")}}),Object(e.g)(n,"sm"),n.prop("disabled",!0))}))})),onmount("#remove_rating_and_review",(function(){t(this).on("click",(function(){t.ajax({type:"DELETE",url:"/admin/review/remove/"+t(this).attr("model_id"),data:{message:t("#remove_details").val(),lock_comments:t("#locked_comments").is(":checked"),has_spoilers:t("#has_spoilers").is(":checked"),rating:0}})}))})),onmount("#only_remove_rating",(function(){t(this).on("click",(function(){var a=t(this);a.prop("disabled",!0),Object(e.a)("Are you sure you want to remove this user's rating for this game?",(function(){a.prop("disabled",!1)}),(function(){t.ajax({type:"DELETE",url:"/admin/review/remove/"+a.attr("model_id")+"/rating",success:function(t){toastr.success("Review rating successfully removed")},error:function(t,e,a){toastr.success("Error removing rating: "+a)}})}),"Cancel","Remove")}))})),onmount("#remove_model_button",(function(){t(this).on("click",(function(){"review"==t(this).attr("type")?t.ajax({type:"DELETE",url:"/admin/review/remove/"+t(this).attr("model_id"),data:{message:t("#remove_details").val(),lock_comments:t("#locked_comments").is(":checked"),has_spoilers:t("#has_spoilers").is(":checked")},success:function(t){toastr.success("Review successfully updated")},error:function(t,e,a){toastr.success("Error updating review: "+a)}}):"comment"==t(this).attr("type")?t.ajax({type:"DELETE",url:"/admin/comment/remove/"+t(this).attr("model_id"),data:{message:t("#remove_details").val()},success:function(t){toastr.success("Comment successfully updated")},error:function(t,e,a){toastr.success("Error updating comment: "+a)}}):"list"==t(this).attr("type")&&t.ajax({type:"DELETE",url:"/admin/list/remove/"+t(this).attr("model_id"),data:{message:t("#remove_details").val()},success:function(t){toastr.success("List successfully updated")},error:function(t,e,a){toastr.success("Error updating list: "+a)}})}))})),onmount(".admin-section-toggle",(function(){t(this).on("click",(function(){var e=t(this).attr("section");t(".admin-section-toggle").removeClass("toggled"),t(this).addClass("toggled"),t(".admin-section-toggleable").addClass("d-none"),t(".admin-section-toggleable#admin-"+e).removeClass("d-none")}))})),onmount(".reactivate-user-quick",(function(){t(this).on("click",(function(){var e=t(this).attr("user_id"),a=t(this);t.ajax({type:"POST",url:"/reactivate/"+e,success:function(t){toastr.success("Reactivated succesfully"),a.addClass("d-none")}})}))}))}.call(this,a(7))},199:function(t,e,a){"use strict";a.r(e),function(t){var e=a(23),n=a(10);a(4);e.b.register(e.c,e.a,e.d);var o,i,s=a(10).default,l=a(61);function r(t){for(var e=0,a=0;a<t.length;a++)e+=t[a]<<0;return e}function c(e){t.ajax({type:"POST",url:"/stats/"+t("#static-info").attr("user_id")+"/yearly/"+e,success:function(a){t("#yearly-graph .graph-bar-bkg").each((function(){var e=t(this).attr("year");t(this).height((a.data[e]?a.data[e]*(1/a.max)*100:.25).toString()+"%")})),t(".yearly-graph-col").each((function(){var n=t(this).attr("year"),o="<span class='main'>"+Math.floor(n)+"</span><br>";a.data[n]?t(this).removeClass("empty-column"):t(this).addClass("empty-column");var i=parseInt(a.data[n])||0;"ratings_year"==e?(o+="Avg Rating "+(a.data[n]?(a.data[n]/2).toFixed(2):"-"),t(this).children().attr("href",t(this).children().attr("ratings_url"))):(o+=i+" Game"+(1==i?" ":"s ")+("played_year"==e?"Played":"release_year"==e?"Released":"Finished"),"release_year"==e?t(this).children().attr("href",t(this).children().attr("release_url")):t(this).children().attr("href",t(this).children().attr("finished_url"))),t(this).attr("data-tippy-content",o)})),o&&t.each(o,(function(t,e){e.destroy()})),o=s(".yearly-graph-col"),i?i.setInstances(o):i=Object(n.createSingleton)(o,{moveTransition:"transform 0.2s ease-out",placement:"right",theme:"backloggd-stats",allowHTML:!0})}})}onmount("#platforms-graph",(function(){var t=s("#platforms-graph .graph-bar-row");Object(n.createSingleton)(t,{moveTransition:"transform 0.2s ease-out",placement:"left",theme:"backloggd-stats",allowHTML:!0})})),onmount("#genres-graph",(function(){var t=s("#genres-graph .graph-bar-row");Object(n.createSingleton)(t,{moveTransition:"transform 0.2s ease-out",placement:"left",theme:"backloggd-stats",allowHTML:!0})})),onmount(".stats-progress-line",(function(){t(this).html("");var e=new l.Line(t(this)[0],{color:"#BADEFC",from:{color:"#BADEFC"},to:{color:"#ea377a"},trailColor:"#242832",strokeWidth:2,trailWidth:2,duration:1500,easing:"easeOut",step:function(t,e){e.path.setAttribute("stroke",t.color)}});e.set(0),e.animate(t(this).attr("progress"))})),onmount(".stats-progress-circle",(function(){t(this).html("");var e=new l.Circle(t(this)[0],{color:"#ea377a",trailColor:"#8890ad8c",strokeWidth:10,trailWidth:2,duration:1500,easing:"easeOut"});e.set(0),e.animate(t(this).attr("progress"))})),onmount("#ownership-chart",(function(){t.ajax({type:"POST",url:"/stats/"+t("#static-info").attr("user_id")+"/ownership",success:function(a){var n=t("#ownership-chart");r(a.data.datasets[0].data)<10&&t("#ownership-title, #ownership-chart-section").addClass("d-none");new e.b(n,{type:"pie",data:a.data,options:{legend:{position:"bottom",onClick:null,labels:{fontColor:"#fff"}},tooltips:{cornerRadius:4,callbacks:{label:function(t,e){var a=e.datasets[t.datasetIndex],n=a._meta[Object.keys(a._meta)[0]].total,o=a.data[t.index];return o+" ("+parseFloat((o/n*100).toFixed(1))+"%)"},title:function(t,e){return e.labels[t[0].index]}}},plugins:{labels:{render:"label",fontColor:"#fff",overlap:!1,position:"border"}}}})}})})),onmount("#medium-chart",(function(){t.ajax({type:"POST",url:"/stats/"+t("#static-info").attr("user_id")+"/medium",success:function(a){var n=t("#medium-chart");r(a.data.datasets[0].data)<10&&t("#medium-chart-section, #medium-title").addClass("d-none");new e.b(n,{type:"pie",data:a.data,options:{legend:{position:"bottom",onClick:null,labels:{fontColor:"#fff"}},tooltips:{cornerRadius:4,callbacks:{label:function(t,e){var a=e.datasets[t.datasetIndex],n=a._meta[Object.keys(a._meta)[0]].total,o=a.data[t.index];return o+" ("+parseFloat((o/n*100).toFixed(1))+"%)"},title:function(t,e){return e.labels[t[0].index]}}},plugins:{labels:{render:"label",fontColor:"#fff",overlap:!1,position:"border"}}}})}})})),onmount("#game-journal-chart",(function(){t.ajax({type:"GET",url:"/stats/game/"+t(this).attr("game_id")+"/journal",success:function(a){var n=t("#game-journal-chart");new e.b(n,{type:"line",data:a.data,options:{legend:{display:!1},tooltips:{cornerRadius:4,callbacks:{label:function(t,e){return e.datasets[t.datasetIndex].data[t.index]||0},title:function(t,e){return e.labels[t[0].index]}}},scales:{yAxes:[{ticks:{callback:function(t,e,a){return e%2==0?t:void 0}},gridLines:{display:!0,color:"#242832"}}],xAxes:[{ticks:{callback:function(t,e,a){return e%2==0?t:void 0}},gridLines:{display:!1}}]},plugins:{labels:{render:"label",fontColor:"#fff",overlap:!1,position:"border"}}}})}})})),onmount("#yearly-graph",(function(){c(t("#yearly-graph-nav .btn.toggled").attr("data-type"))})),onmount("#stats-series-container",(function(){t.ajax({type:"GET",url:"/stats/"+t("#static-info").attr("user_id")+"/series/all"})})),onmount("#series-progress-nav .btn",(function(){t(this).on("click",(function(){if(!t(this).hasClass("toggled")){t("#series-progress-nav .btn").removeClass("toggled"),t(this).addClass("toggled");var e=t(this).attr("data-type");"completed_series"==e?t.ajax({type:"GET",url:"/stats/"+t("#static-info").attr("user_id")+"/series/completed"}):"progress_series"==e?t.ajax({type:"GET",url:"/stats/"+t("#static-info").attr("user_id")+"/series/progress"}):t.ajax({type:"GET",url:"/stats/"+t("#static-info").attr("user_id")+"/series/all"})}}))})),onmount("#fav-company-nav .btn",(function(){t(this).on("click",(function(){if(!t(this).hasClass("toggled")){t("#fav-company-nav .btn").removeClass("toggled"),t(this).addClass("toggled");var e=t(this).attr("data-type");t(".company-stat-section").addClass("d-none"),t("#company_"+e).removeClass("d-none")}}))})),onmount("#yearly-graph-nav .btn",(function(){t(this).on("click",(function(){t(this).hasClass("toggled")||(t("#yearly-graph-nav .btn").removeClass("toggled"),t(this).addClass("toggled"),c(t(this).attr("data-type")))}))})),onmount(".log-status-card",(function(){t(this).hover((function(){t(".log-status-card, .log-status.total-status-bar").addClass("disabled"),t(".log-status.total-status-bar."+t(this).attr("status")).removeClass("disabled"),t(this).removeClass("disabled")}),(function(){t(".log-status-card, .log-status.total-status-bar").removeClass("disabled")}))})),onmount(".log-status.total-status-bar",(function(){t(this).hover((function(){t(".log-status-card, .log-status.total-status-bar").addClass("disabled"),t('.log-status-card[status="'+t(this).attr("status")+'"]').removeClass("disabled"),t(this).removeClass("disabled")}),(function(){t(".log-status-card, .log-status.total-status-bar").removeClass("disabled")}))})),onmount(".game-status-card",(function(){t(this).hover((function(){t(".game-status-card, .game-status.total-status-bar").addClass("disabled"),t(".game-status.total-status-bar."+t(this).attr("status")).removeClass("disabled"),t(this).removeClass("disabled")}),(function(){t(".game-status-card, .game-status.total-status-bar").removeClass("disabled")}))})),onmount(".game-status.total-status-bar",(function(){t(this).hover((function(){t(".game-status-card, .game-status.total-status-bar").addClass("disabled"),t('.game-status-card[status="'+t(this).attr("status")+'"]').removeClass("disabled"),t(this).removeClass("disabled")}),(function(){t(".game-status-card, .game-status.total-status-bar").removeClass("disabled")}))}))}.call(this,a(7))},200:function(t,e,a){(function(t){onmount("#comment-submit",(function(){t(this).on("click",(function(){var e=t(this).attr("model_id"),a=t(this).attr("model_type"),n=t("#comment_body").val();t(this).prop("disabled",!0),t(this).html("Sending..."),t.ajax({type:"POST",url:"/comment/"+a+"/new/"+e,data:{comment_body:n},success:function(e){t("#comment-submit").prop("disabled",!1),t("#comment-submit").html("Comment"),t("#comment_body").val(""),toastr.success("Your comment has been posted")}})}))})),onmount(".delete-comment-btn",(function(){t(this).on("click",(function(){if(t(this).prop("disabled",!0),1==confirm("Are you sure you'd like to delete this comment?")){var e=t(this).attr("comment_id");t.ajax({type:"DELETE",url:"/comment/destroy/"+e,success:function(a){t("#comment-"+e).remove(),toastr.success("Comment removed")}})}else t(this).prop("disabled",!1)}))})),onmount("#display-removed-comments",(function(){t(this).on("click",(function(){t(this).addClass("d-none"),t(".comment-hidden").removeClass("d-none")}))})),onmount("#appeal-comment-submit",(function(){t(this).on("click",(function(){var e=t(this).attr("review_id"),a=t("#appeal_comment_body").val(),n=t(this).attr("from_mod");t(this).prop("disabled",!0),t(this).html("Sending..."),t.ajax({type:"POST",url:"/comment/appeal/new/"+e,data:{comment_body:a,from_mod:n},success:function(e){t("#appeal-comment-submit").prop("disabled",!1),t("#appeal-comment-submit").html("Comment"),t("#appeal-comment-submit").val(""),toastr.success("Your comment has been submitted"),window.location.reload()}})}))}))}).call(this,a(7))},201:function(t,e,a){"use strict";a.r(e),function(t){var e=a(3),n=a(4),o=a(5),i=a.n(o);onmount(".game-journal-container",(function(){var e=t(this).attr("journal_date"),a=t(this);t.ajax({type:"GET",url:"/journal/friends/"+e,success:function(t){a.html(t)}})})),onmount("#edit-log-title-icon",(function(){t(this).on("click",(function(){t("#log-title-field").prop("disabled",!t("#log-title-field").prop("disabled")),t("#log-title-field").prop("disabled")?(t("#edit-log-title-icon i").addClass("fa-pen-square"),t("#edit-log-title-icon i").removeClass("fa-check-square")):(t("#edit-log-title-icon i").removeClass("fa-pen-square"),t("#edit-log-title-icon i").addClass("fa-check-square"))}))}));var s=!0;onmount("#expand-review-editor",(function(){t(this).on("click",(function(){var a=t("#review").val();t("#full_review").val(a),t("#review-editor-draft").prop("disabled",!1),s=!0,e.default.show("review-editor-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0,onClose:function(){if(t("#expand-review-editor").blur(),s){var e=t("#full_review").val();t("#review").val(e)}}})}))})),onmount("#review-editor-draft",(function(){t(this).on("click",(function(){var a=t("#full_review").val();t(this).prop("disabled",!0),t.ajax({type:"POST",url:"/user/review/draft",data:{review:a},success:function(t){s=!1,e.default.close("review-editor-modal")},error:function(t){}})}))})),onmount("#review-editor-close",(function(){t(this).on("click",(function(){e.default.close("review-editor-modal")}))})),onmount("#formatting-guide-toggle",(function(){t(this).on("click",(function(){t("#formatting-info").toggleClass("d-none"),t("#formatting-guide-toggle i").toggleClass("fa-rotate-180")}))})),onmount(".time-checkbox-option",(function(){t(this).on("change",(function(){t(this).prop("checked")?(t(".time-checkbox-option").prop("checked",!1),t(this).prop("checked",!0),t("#log-time-played-hours, #log-time-played-minutes").prop("disabled",!0)):t("#log-time-played-hours, #log-time-played-minutes").prop("disabled",!1)}))})),onmount(".cancel-rating",(function(){t(this).on("click",(function(){var e=t(this).attr("game_log_id");t.ajax({type:"DELETE",url:"/delete-rating/"+e})}))})),onmount(".quick-logs",(function(){t(this).on("click",(function(){window.location.href="/u/"+t(this).attr("username")+"/plays/"+t(this).attr("game_id")+"/"}))})),onmount(".delete-log",(function(){t(this).on("click",(function(){var e=t(this).attr("playthrough_id");Object(n.a)("Delete this log?<br><br>This includes its associated review and any logged journal sessions.",(function(){}),(function(){t.ajax({type:"DELETE",url:"/playthrough/"+e,success:function(t){location.reload()}})}),"Cancel","Delete")}))})),onmount(".library-plat-selectpicker",(function(){var e=t(this).attr("selected-value");t(this).html(t("#game-platform-options").html()),t(this).selectpicker("refresh"),0==t(this).children('option[value="'+e+'"]').length&&(t(this).append(t('#playthrough-platform-emulated option[value="'+e+'"]').clone()),t(this).children('option[value="'+e+'"]').attr("data-icon","fas fa-exclamation-triangle").attr("data-subtext","removed"),t(this).selectpicker("refresh")),t(this).selectpicker("val",e)})),onmount("#playthrough_platform",(function(){t(this).on("changed.bs.select",(function(e,a,n,o){"false"===t("#playthrough-platform-emulated").attr("user-edited")&&t("#playthrough-platform-emulated").selectpicker("val",t(this).val())}))})),onmount("#playthrough-platform-emulated",(function(){t(this).on("changed.bs.select",(function(e,a,n,o){t(this).attr("user-edited",!0===n)}))})),onmount("#note-privacy-dropdown .nav-link",(function(){t(this).on("click",(function(){t("#note-privacy-dropdown .nav-link").removeClass("current-sort"),t("#note-privacy-button-text").html(t(this).html()),t(this).addClass("current-sort")}))})),onmount("#game-status-selector",(function(){t(this).on("click",(function(){e.default.show("play-type-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0,onShow:function(){var e=t("#status").attr("value");t("#play-type-modal .play-type-option#"+e).addClass("filled")}})}))})),onmount("#play-type-modal .play-type-option",(function(){t(this).on("click",(function(){t("#play-type-modal .play-type-option").removeClass("filled"),e.default.close("play-type-modal"),t("#status").val(t(this).attr("id")),t("#play-type-field").html(t(this).attr("id")),t("#played-status-selectors #game-status-selector").attr("class","btn-link play-type-bkg "+t(this).attr("id")),t("#played-status-selectors #play-toggle-label").attr("class","play-type-bkg "+t(this).attr("id")),t("#play-label-title").html(t(this).attr("title")),t("#play_toggle_checkbox").prop("checked",!0)}))})),onmount("#log-advanced-section-control",(function(){t(this).on("click",(function(){t(this).toggleClass("fa-rotate-180"),t("#log-advanced-section").toggleClass("d-none"),i.a.set("advanced_open",!t("#log-advanced-section").hasClass("d-none"),{sameSite:"strict",expires:365}),"mobile"!==Object(n.e)()&&(t("#btn-destroy-all-logs-v2").attr("log_id")&&""!==t("#btn-destroy-all-logs-v2").attr("log_id")?t("#btn-destroy-all-logs-v2").toggleClass("d-none"):t("#btn-destroy-all-logs-v2").addClass("d-none"))}))})),onmount("#log-dates-section-control",(function(){t(this).on("click",(function(){t("#log-dates-section").toggleClass("d-none")}))}))}.call(this,a(7))},202:function(t,e,a){(function(t){onmount("#patreon-connect",(function(){t(this).on("click",(function(){var e=t(this).attr("client_id"),a=location.protocol+"//"+location.host+"/patreon/setup/";window.location.href="https://www.patreon.com/oauth2/authorize?response_type=code&client_id="+e+"&redirect_uri="+a+"&scope=identity"}))})),onmount("#patreon-disconnect",(function(){t(this).on("click",(function(){t.ajax({method:"DELETE",url:"/patreon/disconnect/",success:function(t){window.location.reload()}}),t(this).prop("disabled",!0)}))}))}).call(this,a(7))},4:function(t,e,a){"use strict";(function(t){a.d(e,"f",(function(){return o})),a.d(e,"e",(function(){return i})),a.d(e,"d",(function(){return s})),a.d(e,"g",(function(){return l})),a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return c})),a.d(e,"c",(function(){return d}));var n=!0;function o(){t(".sidebar").removeClass("active"),t(".sidebar-overlay").removeClass("active"),t("body").removeClass("noScroll")}function i(){return t("#journal-game-modal .modal-body").attr("type")}function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"md",a="sm"===e?"spinner spinner-sm":"spinner";t.html('<div class="'+a+'"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>')}function r(t,e,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Discard",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Save";d(t,e,a,e,n,"",o,!0,!0)}function c(t,e,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Discard",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Save";d(t,e,a,e,n,"",o,!0)}function d(e,a,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Discard",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"Return to edit",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Save",d=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8];t("#journal-warning-modal #warning-desc").html(e),t("#journal-warning-modal #warning-abort").text(s),t("#journal-warning-modal #warning-cancel").text(r),t("#journal-warning-modal #warning-save").text(c),d?t("#journal-warning-modal #warning-cancel").addClass("d-none"):t("#journal-warning-modal #warning-cancel").removeClass("d-none"),u?(t("#journal-warning-modal #password-section").removeClass("d-none"),t("#verify-password-incorrect").addClass("d-none")):t("#journal-warning-modal #password-section").addClass("d-none"),MicroModal.show("journal-warning-modal",{awaitOpenAnimation:!0,awaitCloseAnimation:!0,onClose:function(){n&&i(),t("#warning-verify-password").val(""),n=!0}}),t("#warning-abort").off("click").one("click",(function(){a(),n=!1,MicroModal.close("journal-warning-modal")})),t("#warning-save").off("click").on("click",(function(){if(u){var e=t("#warning-verify-password").val();if(e.length<1)return;t.ajax({type:"POST",url:"/user/password/verify/",data:{password:e},success:function(t){o(),n=!1,MicroModal.close("journal-warning-modal")},error:function(e){t("#warning-save").text(c),t("#warning-save").prop("disabled",!1),t("#verify-password-incorrect").removeClass("d-none")}}),l(t("#warning-save"),"sm"),t("#warning-save").prop("disabled",!0)}else o(),n=!1,MicroModal.close("journal-warning-modal")}))}}).call(this,a(7))},75:function(t,e,a){t.exports=a.p+"media/images/IGDB_logo-72568f6cd69e422d60705cab4ff6aec8.svg"},76:function(t,e,a){t.exports=a.p+"media/images/backloggd-logo-full-5cdba93625dfa851ff41d48ee86d836b.png"},77:function(t,e,a){t.exports=a.p+"media/images/goty19-10552df31c13be5b1443a46dee1276a8.png"},78:function(t,e,a){t.exports=a.p+"media/images/goty20-cfd82ef3dd9ae5f76ac44bd6010d3c93.png"},79:function(t,e,a){t.exports=a.p+"media/images/goty21-a355bd6c1948e7cf886ebefa333000b5.png"},80:function(t,e,a){t.exports=a.p+"media/images/goty21_winners-1882c00c83c40d5db91654483fe7f3ed.png"},81:function(t,e,a){t.exports=a.p+"media/images/humble-5f5f7e403823f5d35a0250e4c66633dc.png"},82:function(t,e,a){t.exports=a.p+"media/images/humble-jackbox-9ff1115ca6d11a81e79ff27e7373bb4b.png"},83:function(t,e,a){t.exports=a.p+"media/images/humble_square-c542006327715d70f0b89d008dcd4c56.png"},84:function(t,e,a){t.exports=a.p+"media/images/humblemonthly-41ede73c537e46f783871c2a2c44abe6.png"},85:function(t,e,a){t.exports=a.p+"media/images/igdb_icon_white-a5c45bb6faf71448c5c8760807fc030f.png"},86:function(t,e,a){t.exports=a.p+"media/images/meta_banner-d63b2a0bc9b9184fa61ddf135435c219.jpg"},87:function(t,e,a){t.exports=a.p+"media/images/no_avatar-9e38482cb198a942b3e684fbb64b7970.jpg"},88:function(t,e,a){t.exports=a.p+"media/images/no_image-eee1d555ae021e9cf0ca691c0e9ec60a.jpg"},89:function(t,e,a){t.exports=a.p+"media/images/steam_circle-a26e22d5d4db1ce3a0f3b501c78327eb.png"}},[[104,1,2]]]);
//# sourceMappingURL=application-e198b0a015510dd6220d.chunk.js.map